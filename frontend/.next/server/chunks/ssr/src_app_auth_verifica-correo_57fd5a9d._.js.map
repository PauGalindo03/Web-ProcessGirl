{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/app/auth/verifica-correo/VerificaCorreo.module.css [app-ssr] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"alertaUrgente\": \"VerificaCorreo-module__NepKKG__alertaUrgente\",\n  \"boton\": \"VerificaCorreo-module__NepKKG__boton\",\n  \"container\": \"VerificaCorreo-module__NepKKG__container\",\n  \"input\": \"VerificaCorreo-module__NepKKG__input\",\n  \"mensaje\": \"VerificaCorreo-module__NepKKG__mensaje\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 14, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pauli/Desktop/Digital_Nest/Proyects/Process_Girl/process_girl_web/frontend/src/app/auth/verifica-correo/page.tsx"],"sourcesContent":["\"use client\";\r\nimport { useSearchParams, useRouter } from \"next/navigation\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nimport styles from \"./VerificaCorreo.module.css\";\r\n\r\nimport { useAlerta } from \"@/context/AlertaContext\";\r\nimport { resendVerificationEmail } from \"@/services/authService\";\r\n\r\nexport default function VerificaCorreo() {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [expiresAt, setExpiresAt] = useState<Date | null>(null);\r\n  const [tiempoRestante, setTiempoRestante] = useState<number | null>(null);\r\n  const [cargando, setCargando] = useState(false);\r\n  const { mostrarAlerta } = useAlerta();\r\n  const router = useRouter();\r\n  const params = useSearchParams();\r\n\r\n  useEffect(() => {\r\n    if (!params) return;\r\n\r\n    const emailParam = params.get(\"email\");\r\n    const expiresParam = params.get(\"expiresAt\");\r\n\r\n    if (emailParam) setEmail(emailParam);\r\n    if (expiresParam) setExpiresAt(new Date(expiresParam));\r\n  }, [params]);\r\n\r\n  useEffect(() => {\r\n    if (!expiresAt) return;\r\n\r\n    const updateTiempo = () => {\r\n      const restante = expiresAt.getTime() - Date.now();\r\n      setTiempoRestante(restante > 0 ? restante : 0);\r\n      if (restante <= 0) {\r\n        mostrarAlerta(\r\n          \"Tu enlace de verificación ha expirado. Regístrate de nuevo.\",\r\n          \"error\"\r\n        );\r\n        router.push(\"/auth/register\");\r\n      }\r\n    };\r\n\r\n    updateTiempo();\r\n    const interval = setInterval(updateTiempo, 1000);\r\n    return () => clearInterval(interval);\r\n  }, [expiresAt, mostrarAlerta, router]);\r\n\r\n  const handleReenviar = async () => {\r\n    setCargando(true);\r\n    try {\r\n      const res = await resendVerificationEmail(email);\r\n      mostrarAlerta(res.message, \"success\");\r\n    } catch (err: unknown) {\r\n      const mensaje =\r\n        err instanceof Error\r\n          ? err.message\r\n          : typeof err === \"object\" && err !== null && \"message\" in err\r\n            ? String((err as { message?: unknown }).message)\r\n            : \"Error al reenviar el correo.\";\r\n      mostrarAlerta(mensaje, \"error\");\r\n    } finally {\r\n      setCargando(false);\r\n    }\r\n  };\r\n\r\n  const minutos = tiempoRestante ? Math.floor(tiempoRestante / 60000) : 0;\r\n  const segundos = tiempoRestante\r\n    ? Math.floor((tiempoRestante % 60000) / 1000)\r\n    : 0;\r\n\r\n  return (\r\n    <section className={styles.container}>\r\n      <h2>Verifica tu correo</h2>\r\n      <p>Te enviamos un correo con un enlace para verificar tu cuenta.</p>\r\n\r\n      <input\r\n        type=\"email\"\r\n        placeholder=\"Tu correo\"\r\n        value={email}\r\n        onChange={(e) => setEmail(e.target.value)}\r\n        className={styles.input}\r\n      />\r\n\r\n      {tiempoRestante !== null && tiempoRestante > 0 && (\r\n        <>\r\n          <p className={styles.mensaje}>\r\n            Tu enlace expira en{\" \"}\r\n            <strong>\r\n              {minutos}:{segundos.toString().padStart(2, \"0\")}\r\n            </strong>\r\n          </p>\r\n\r\n          {tiempoRestante < 5 * 60 * 1000 && (\r\n            <p className={styles.alertaUrgente}>\r\n              ⚠️ ¡Quedan menos de 5 minutos para verificar tu cuenta!\r\n            </p>\r\n          )}\r\n\r\n          <button\r\n            onClick={handleReenviar}\r\n            disabled={cargando || !email}\r\n            className={styles.boton}\r\n          >\r\n            {cargando ? \"Reenviando...\" : \"Reenviar correo\"}\r\n          </button>\r\n        </>\r\n      )}\r\n\r\n      {tiempoRestante === 0 && (\r\n        <p className={styles.mensaje}>\r\n          Tu enlace ha expirado.{\" \"}\r\n          <a href=\"/auth/register\">Regístrate de nuevo</a>.\r\n        </p>\r\n      )}\r\n    </section>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AAEA;AAEA;AACA;AAPA;;;;;;;AASe,SAAS;IACtB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,gVAAQ,EAAC;IACnC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,gVAAQ,EAAc;IACxD,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,gVAAQ,EAAgB;IACpE,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,gVAAQ,EAAC;IACzC,MAAM,EAAE,aAAa,EAAE,GAAG,IAAA,6IAAS;IACnC,MAAM,SAAS,IAAA,8QAAS;IACxB,MAAM,SAAS,IAAA,oRAAe;IAE9B,IAAA,iVAAS,EAAC;QACR,IAAI,CAAC,QAAQ;QAEb,MAAM,aAAa,OAAO,GAAG,CAAC;QAC9B,MAAM,eAAe,OAAO,GAAG,CAAC;QAEhC,IAAI,YAAY,SAAS;QACzB,IAAI,cAAc,aAAa,IAAI,KAAK;IAC1C,GAAG;QAAC;KAAO;IAEX,IAAA,iVAAS,EAAC;QACR,IAAI,CAAC,WAAW;QAEhB,MAAM,eAAe;YACnB,MAAM,WAAW,UAAU,OAAO,KAAK,KAAK,GAAG;YAC/C,kBAAkB,WAAW,IAAI,WAAW;YAC5C,IAAI,YAAY,GAAG;gBACjB,cACE,+DACA;gBAEF,OAAO,IAAI,CAAC;YACd;QACF;QAEA;QACA,MAAM,WAAW,YAAY,cAAc;QAC3C,OAAO,IAAM,cAAc;IAC7B,GAAG;QAAC;QAAW;QAAe;KAAO;IAErC,MAAM,iBAAiB;QACrB,YAAY;QACZ,IAAI;YACF,MAAM,MAAM,MAAM,IAAA,yJAAuB,EAAC;YAC1C,cAAc,IAAI,OAAO,EAAE;QAC7B,EAAE,OAAO,KAAc;YACrB,MAAM,UACJ,eAAe,QACX,IAAI,OAAO,GACX,OAAO,QAAQ,YAAY,QAAQ,QAAQ,aAAa,MACtD,OAAO,AAAC,IAA8B,OAAO,IAC7C;YACR,cAAc,SAAS;QACzB,SAAU;YACR,YAAY;QACd;IACF;IAEA,MAAM,UAAU,iBAAiB,KAAK,KAAK,CAAC,iBAAiB,SAAS;IACtE,MAAM,WAAW,iBACb,KAAK,KAAK,CAAC,AAAC,iBAAiB,QAAS,QACtC;IAEJ,qBACE,6WAAC;QAAQ,WAAW,iLAAM,CAAC,SAAS;;0BAClC,6WAAC;0BAAG;;;;;;0BACJ,6WAAC;0BAAE;;;;;;0BAEH,6WAAC;gBACC,MAAK;gBACL,aAAY;gBACZ,OAAO;gBACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;gBACxC,WAAW,iLAAM,CAAC,KAAK;;;;;;YAGxB,mBAAmB,QAAQ,iBAAiB,mBAC3C;;kCACE,6WAAC;wBAAE,WAAW,iLAAM,CAAC,OAAO;;4BAAE;4BACR;0CACpB,6WAAC;;oCACE;oCAAQ;oCAAE,SAAS,QAAQ,GAAG,QAAQ,CAAC,GAAG;;;;;;;;;;;;;oBAI9C,iBAAiB,IAAI,KAAK,sBACzB,6WAAC;wBAAE,WAAW,iLAAM,CAAC,aAAa;kCAAE;;;;;;kCAKtC,6WAAC;wBACC,SAAS;wBACT,UAAU,YAAY,CAAC;wBACvB,WAAW,iLAAM,CAAC,KAAK;kCAEtB,WAAW,kBAAkB;;;;;;;;YAKnC,mBAAmB,mBAClB,6WAAC;gBAAE,WAAW,iLAAM,CAAC,OAAO;;oBAAE;oBACL;kCACvB,6WAAC;wBAAE,MAAK;kCAAiB;;;;;;oBAAuB;;;;;;;;;;;;;AAK1D","debugId":null}}]
}