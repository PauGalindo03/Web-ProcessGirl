{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/app/auth/verificacion/VerificaCorreo.module.css [app-ssr] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"alertaUrgente\": \"VerificaCorreo-module__bxP9MW__alertaUrgente\",\n  \"boton\": \"VerificaCorreo-module__bxP9MW__boton\",\n  \"container\": \"VerificaCorreo-module__bxP9MW__container\",\n  \"input\": \"VerificaCorreo-module__bxP9MW__input\",\n  \"mensaje\": \"VerificaCorreo-module__bxP9MW__mensaje\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 13, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/components/auth/EstadoVerificacion.module.css [app-ssr] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"boton\": \"EstadoVerificacion-module__GqsPoG__boton\",\n  \"estado\": \"EstadoVerificacion-module__GqsPoG__estado\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA"}},
    {"offset": {"line": 21, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pauli/Desktop/Digital_Nest/Proyects/Process_Girl/process_girl_web/frontend/src/components/auth/EstadoVerificacion.tsx"],"sourcesContent":["// src/components/auth/EstadoVerificacion.tsx\r\n'use client';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useState } from 'react';\r\n\r\nimport styles from './EstadoVerificacion.module.css';\r\n\r\nimport { useAlerta } from '@/context/AlertaContext';\r\nimport { resendVerificationEmail } from '@/services/authService';\r\n\r\ninterface EstadoVerificacionProps {\r\n  email: string;\r\n  isEmailVerified: boolean;\r\n  expiresAt?: string;\r\n  onReenviar?: () => void; // ✅ esta línea es la clave\r\n}\r\n\r\nexport default function EstadoVerificacion({\r\n  email,\r\n  isEmailVerified,\r\n  expiresAt,\r\n}: EstadoVerificacionProps) {\r\n  const router = useRouter();\r\n  const { mostrarAlerta } = useAlerta();\r\n  const [cargando, setCargando] = useState(false);\r\n\r\n  const tiempoRestante = expiresAt\r\n    ? new Date(expiresAt).getTime() - Date.now()\r\n    : null;\r\n\r\n  const handleReenviar = async () => {\r\n    setCargando(true);\r\n    try {\r\n      const res = await resendVerificationEmail(email);\r\n      mostrarAlerta(res.message, 'success');\r\n    } catch (err: unknown) {\r\n      const mensaje =\r\n        err instanceof Error\r\n          ? err.message\r\n          : typeof err === 'object' && err !== null && 'message' in err\r\n          ? String((err as { message?: unknown }).message)\r\n          : 'Error al reenviar el correo.';\r\n      mostrarAlerta(mensaje, 'error');\r\n    } finally {\r\n      setCargando(false);\r\n    }\r\n  };\r\n\r\n  if (isEmailVerified) {\r\n    return (\r\n      <div className={styles.estado}>\r\n        <p>✅ Tu correo ya está verificado.</p>\r\n        <button type=\"button\" onClick={() => router.push('/auth/login')} className={styles.boton}>\r\n          Iniciar sesión\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (tiempoRestante !== null && tiempoRestante > 0) {\r\n    const minutos = Math.floor(tiempoRestante / 60000);\r\n    const segundos = Math.floor((tiempoRestante % 60000) / 1000);\r\n\r\n    return (\r\n      <div className={styles.estado}>\r\n        <p>⏳ Tu correo aún no está verificado.</p>\r\n        <p>\r\n          El enlace expira en <strong>{minutos}:{segundos.toString().padStart(2, '0')}</strong>\r\n        </p>\r\n        <button type=\"button\" onClick={handleReenviar} disabled={cargando} className={styles.boton}>\r\n          {cargando ? 'Reenviando...' : 'Reenviar correo de verificación'}\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={styles.estado}>\r\n      <p>❌ El enlace de verificación ha expirado.</p>\r\n      <button type=\"button\" onClick={() => router.push('/auth/register')} className={styles.boton}>\r\n        Registrarme de nuevo\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,6CAA6C;;;;;;AAE7C;AACA;AAEA;AAEA;AACA;AAPA;;;;;;;AAgBe,SAAS,mBAAmB,EACzC,KAAK,EACL,eAAe,EACf,SAAS,EACe;IACxB,MAAM,SAAS,IAAA,8QAAS;IACxB,MAAM,EAAE,aAAa,EAAE,GAAG,IAAA,6IAAS;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,gVAAQ,EAAC;IAEzC,MAAM,iBAAiB,YACnB,IAAI,KAAK,WAAW,OAAO,KAAK,KAAK,GAAG,KACxC;IAEJ,MAAM,iBAAiB;QACrB,YAAY;QACZ,IAAI;YACF,MAAM,MAAM,MAAM,IAAA,yJAAuB,EAAC;YAC1C,cAAc,IAAI,OAAO,EAAE;QAC7B,EAAE,OAAO,KAAc;YACrB,MAAM,UACJ,eAAe,QACX,IAAI,OAAO,GACX,OAAO,QAAQ,YAAY,QAAQ,QAAQ,aAAa,MACxD,OAAO,AAAC,IAA8B,OAAO,IAC7C;YACN,cAAc,SAAS;QACzB,SAAU;YACR,YAAY;QACd;IACF;IAEA,IAAI,iBAAiB;QACnB,qBACE,6WAAC;YAAI,WAAW,sKAAM,CAAC,MAAM;;8BAC3B,6WAAC;8BAAE;;;;;;8BACH,6WAAC;oBAAO,MAAK;oBAAS,SAAS,IAAM,OAAO,IAAI,CAAC;oBAAgB,WAAW,sKAAM,CAAC,KAAK;8BAAE;;;;;;;;;;;;IAKhG;IAEA,IAAI,mBAAmB,QAAQ,iBAAiB,GAAG;QACjD,MAAM,UAAU,KAAK,KAAK,CAAC,iBAAiB;QAC5C,MAAM,WAAW,KAAK,KAAK,CAAC,AAAC,iBAAiB,QAAS;QAEvD,qBACE,6WAAC;YAAI,WAAW,sKAAM,CAAC,MAAM;;8BAC3B,6WAAC;8BAAE;;;;;;8BACH,6WAAC;;wBAAE;sCACmB,6WAAC;;gCAAQ;gCAAQ;gCAAE,SAAS,QAAQ,GAAG,QAAQ,CAAC,GAAG;;;;;;;;;;;;;8BAEzE,6WAAC;oBAAO,MAAK;oBAAS,SAAS;oBAAgB,UAAU;oBAAU,WAAW,sKAAM,CAAC,KAAK;8BACvF,WAAW,kBAAkB;;;;;;;;;;;;IAItC;IAEA,qBACE,6WAAC;QAAI,WAAW,sKAAM,CAAC,MAAM;;0BAC3B,6WAAC;0BAAE;;;;;;0BACH,6WAAC;gBAAO,MAAK;gBAAS,SAAS,IAAM,OAAO,IAAI,CAAC;gBAAmB,WAAW,sKAAM,CAAC,KAAK;0BAAE;;;;;;;;;;;;AAKnG","debugId":null}},
    {"offset": {"line": 166, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pauli/Desktop/Digital_Nest/Proyects/Process_Girl/process_girl_web/frontend/src/hooks/utils/useVerificacion.ts"],"sourcesContent":["// src/hooks/useVerificacionCompleta.ts\r\nimport { useRouter, useSearchParams } from 'next/navigation';\r\nimport { useState, useEffect } from 'react';\r\n\r\nimport { useAlerta } from '@/context/AlertaContext';\r\nimport { checkVerificationStatus, resendVerificationEmail } from '@/services/authService';\r\n\r\nexport function useVerificacion({ autoDetectParams = false }: { autoDetectParams?: boolean } = {}) {\r\n  const [email, setEmail] = useState('');\r\n  const [estado, setEstado] = useState<{ isEmailVerified: boolean; expiresAt?: string } | null>(null);\r\n  const [tiempoRestante, setTiempoRestante] = useState<number | null>(null);\r\n  const [cargando, setCargando] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const router = useRouter();\r\n  const params = useSearchParams();\r\n  const { mostrarAlerta } = useAlerta();\r\n\r\n  // Detectar email y expiresAt desde URL si se activa autoDetectParams\r\n  useEffect(() => {\r\n    if (!autoDetectParams || !params) return;\r\n\r\n    const emailParam = params.get('email');\r\n    const expiresParam = params.get('expiresAt');\r\n\r\n    if (emailParam) setEmail(emailParam);\r\n    if (expiresParam) {\r\n      const fecha = new Date(expiresParam);\r\n      setEstado({ isEmailVerified: false, expiresAt: fecha.toISOString() });\r\n    }\r\n  }, [autoDetectParams, params]);\r\n\r\n  // Temporizador si hay expiresAt\r\n  useEffect(() => {\r\n    if (!estado?.expiresAt) return;\r\n\r\n    const expirationDate = new Date(estado.expiresAt);\r\n    const updateTiempo = () => {\r\n      const restante = expirationDate.getTime() - Date.now();\r\n      setTiempoRestante(restante > 0 ? restante : 0);\r\n      if (restante <= 0) {\r\n        mostrarAlerta('Tu enlace de verificación ha expirado. Regístrate de nuevo.', 'error');\r\n        router.push('/auth/register');\r\n      }\r\n    };\r\n\r\n    updateTiempo();\r\n    const interval = setInterval(updateTiempo, 1000);\r\n    return () => clearInterval(interval);\r\n  }, [estado?.expiresAt, mostrarAlerta, router]);\r\n\r\n  const revisar = async (correo: string): Promise<string | null> => {\r\n    setCargando(true);\r\n    setError(null);\r\n    try {\r\n      const data = await checkVerificationStatus(correo);\r\n      setEstado(data);\r\n      setEmail(correo);\r\n      return null;\r\n    } catch (err: unknown) {\r\n      const mensaje =\r\n        err instanceof Error\r\n          ? err.message\r\n          : typeof err === 'object' && err !== null && 'message' in err\r\n          ? String((err as { message?: unknown }).message)\r\n          : 'No se encontró el correo o hubo un error.';\r\n      setError(mensaje);\r\n      return mensaje;\r\n    } finally {\r\n      setCargando(false);\r\n    }\r\n  };\r\n\r\n  const reenviar = async (): Promise<string | null> => {\r\n    setCargando(true);\r\n    setError(null);\r\n    try {\r\n      await resendVerificationEmail(email);\r\n      return null;\r\n    } catch (err: unknown) {\r\n      const mensaje =\r\n        err instanceof Error\r\n          ? err.message\r\n          : typeof err === 'object' && err !== null && 'message' in err\r\n          ? String((err as { message?: unknown }).message)\r\n          : 'Error al reenviar el correo.';\r\n      setError(mensaje);\r\n      return mensaje;\r\n    } finally {\r\n      setCargando(false);\r\n    }\r\n  };\r\n\r\n  return {\r\n    email,\r\n    setEmail,\r\n    estado,\r\n    cargando,\r\n    error,\r\n    tiempoRestante,\r\n    revisar,\r\n    reenviar,\r\n  };\r\n}\r\n"],"names":[],"mappings":"AAAA,uCAAuC;;;;;AACvC;AACA;AAEA;AACA;;;;;AAEO,SAAS,gBAAgB,EAAE,mBAAmB,KAAK,EAAkC,GAAG,CAAC,CAAC;IAC/F,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,gVAAQ,EAAC;IACnC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,gVAAQ,EAA0D;IAC9F,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,gVAAQ,EAAgB;IACpE,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,gVAAQ,EAAC;IACzC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,gVAAQ,EAAgB;IAElD,MAAM,SAAS,IAAA,8QAAS;IACxB,MAAM,SAAS,IAAA,oRAAe;IAC9B,MAAM,EAAE,aAAa,EAAE,GAAG,IAAA,6IAAS;IAEnC,qEAAqE;IACrE,IAAA,iVAAS,EAAC;QACR,IAAI,CAAC,oBAAoB,CAAC,QAAQ;QAElC,MAAM,aAAa,OAAO,GAAG,CAAC;QAC9B,MAAM,eAAe,OAAO,GAAG,CAAC;QAEhC,IAAI,YAAY,SAAS;QACzB,IAAI,cAAc;YAChB,MAAM,QAAQ,IAAI,KAAK;YACvB,UAAU;gBAAE,iBAAiB;gBAAO,WAAW,MAAM,WAAW;YAAG;QACrE;IACF,GAAG;QAAC;QAAkB;KAAO;IAE7B,gCAAgC;IAChC,IAAA,iVAAS,EAAC;QACR,IAAI,CAAC,QAAQ,WAAW;QAExB,MAAM,iBAAiB,IAAI,KAAK,OAAO,SAAS;QAChD,MAAM,eAAe;YACnB,MAAM,WAAW,eAAe,OAAO,KAAK,KAAK,GAAG;YACpD,kBAAkB,WAAW,IAAI,WAAW;YAC5C,IAAI,YAAY,GAAG;gBACjB,cAAc,+DAA+D;gBAC7E,OAAO,IAAI,CAAC;YACd;QACF;QAEA;QACA,MAAM,WAAW,YAAY,cAAc;QAC3C,OAAO,IAAM,cAAc;IAC7B,GAAG;QAAC,QAAQ;QAAW;QAAe;KAAO;IAE7C,MAAM,UAAU,OAAO;QACrB,YAAY;QACZ,SAAS;QACT,IAAI;YACF,MAAM,OAAO,MAAM,IAAA,yJAAuB,EAAC;YAC3C,UAAU;YACV,SAAS;YACT,OAAO;QACT,EAAE,OAAO,KAAc;YACrB,MAAM,UACJ,eAAe,QACX,IAAI,OAAO,GACX,OAAO,QAAQ,YAAY,QAAQ,QAAQ,aAAa,MACxD,OAAO,AAAC,IAA8B,OAAO,IAC7C;YACN,SAAS;YACT,OAAO;QACT,SAAU;YACR,YAAY;QACd;IACF;IAEA,MAAM,WAAW;QACf,YAAY;QACZ,SAAS;QACT,IAAI;YACF,MAAM,IAAA,yJAAuB,EAAC;YAC9B,OAAO;QACT,EAAE,OAAO,KAAc;YACrB,MAAM,UACJ,eAAe,QACX,IAAI,OAAO,GACX,OAAO,QAAQ,YAAY,QAAQ,QAAQ,aAAa,MACxD,OAAO,AAAC,IAA8B,OAAO,IAC7C;YACN,SAAS;YACT,OAAO;QACT,SAAU;YACR,YAAY;QACd;IACF;IAEA,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;IACF;AACF","debugId":null}},
    {"offset": {"line": 270, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pauli/Desktop/Digital_Nest/Proyects/Process_Girl/process_girl_web/frontend/src/app/auth/verificacion/status/page.tsx"],"sourcesContent":["\"use client\";\r\nimport { useState } from \"react\";\r\n\r\nimport styles from \"../VerificaCorreo.module.css\";\r\n\r\nimport EstadoVerificacion from \"@/components/auth/EstadoVerificacion\";\r\nimport { useAlerta } from \"@/context/AlertaContext\";\r\nimport { useVerificacion } from \"@/hooks/utils/useVerificacion\";\r\n\r\nexport default function VerificacionStatus() {\r\n  const [email, setEmail] = useState(\"\");\r\n  const { estado, cargando, error, revisar, reenviar } = useVerificacion();\r\n  const { mostrarAlerta } = useAlerta();\r\n\r\n  const revisarEstado = async () => {\r\n    await revisar(email);\r\n    if (error) mostrarAlerta(error, \"error\");\r\n  };\r\n\r\n  return (\r\n    <section className={styles.container}>\r\n      <h2>Checar estado de verificación</h2>\r\n      <p>Ingresa el correo con el que te registraste:</p>\r\n\r\n      <input\r\n        type=\"email\"\r\n        placeholder=\"Correo registrado\"\r\n        value={email}\r\n        onChange={(e) => setEmail(e.target.value)}\r\n        className={styles.input}\r\n      />\r\n\r\n      <button\r\n        type=\"button\"\r\n        onClick={revisarEstado}\r\n        disabled={cargando || !email}\r\n        className={styles.boton}\r\n      >\r\n        {cargando ? \"Verificando...\" : \"Checar estado\"}\r\n      </button>\r\n\r\n      {estado && (\r\n        <EstadoVerificacion\r\n          email={email}\r\n          isEmailVerified={estado.isEmailVerified}\r\n          expiresAt={estado.expiresAt}\r\n          onReenviar={async () => {\r\n            const error = await reenviar();\r\n            if (error) mostrarAlerta(error, \"error\");\r\n            else mostrarAlerta(\"Correo reenviado correctamente.\", \"success\");\r\n          }}\r\n        />\r\n      )}\r\n    </section>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AAEA;AAEA;AACA;AACA;AAPA;;;;;;;AASe,SAAS;IACtB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,gVAAQ,EAAC;IACnC,MAAM,EAAE,MAAM,EAAE,QAAQ,EAAE,KAAK,EAAE,OAAO,EAAE,QAAQ,EAAE,GAAG,IAAA,2JAAe;IACtE,MAAM,EAAE,aAAa,EAAE,GAAG,IAAA,6IAAS;IAEnC,MAAM,gBAAgB;QACpB,MAAM,QAAQ;QACd,IAAI,OAAO,cAAc,OAAO;IAClC;IAEA,qBACE,6WAAC;QAAQ,WAAW,2KAAM,CAAC,SAAS;;0BAClC,6WAAC;0BAAG;;;;;;0BACJ,6WAAC;0BAAE;;;;;;0BAEH,6WAAC;gBACC,MAAK;gBACL,aAAY;gBACZ,OAAO;gBACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;gBACxC,WAAW,2KAAM,CAAC,KAAK;;;;;;0BAGzB,6WAAC;gBACC,MAAK;gBACL,SAAS;gBACT,UAAU,YAAY,CAAC;gBACvB,WAAW,2KAAM,CAAC,KAAK;0BAEtB,WAAW,mBAAmB;;;;;;YAGhC,wBACC,6WAAC,2JAAkB;gBACjB,OAAO;gBACP,iBAAiB,OAAO,eAAe;gBACvC,WAAW,OAAO,SAAS;gBAC3B,YAAY;oBACV,MAAM,QAAQ,MAAM;oBACpB,IAAI,OAAO,cAAc,OAAO;yBAC3B,cAAc,mCAAmC;gBACxD;;;;;;;;;;;;AAKV","debugId":null}}]
}