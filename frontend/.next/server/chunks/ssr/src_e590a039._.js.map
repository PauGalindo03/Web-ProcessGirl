{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/app/auth/verificacion/VerificaCorreo.module.css [app-ssr] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"alertaUrgente\": \"VerificaCorreo-module__bxP9MW__alertaUrgente\",\n  \"boton\": \"VerificaCorreo-module__bxP9MW__boton\",\n  \"container\": \"VerificaCorreo-module__bxP9MW__container\",\n  \"input\": \"VerificaCorreo-module__bxP9MW__input\",\n  \"mensaje\": \"VerificaCorreo-module__bxP9MW__mensaje\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 14, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pauli/Desktop/Digital_Nest/Proyects/Process_Girl/process_girl_web/frontend/src/hooks/utils/useVerificacion.ts"],"sourcesContent":["// src/hooks/useVerificacionCompleta.ts\r\nimport { useRouter, useSearchParams } from 'next/navigation';\r\nimport { useState, useEffect } from 'react';\r\n\r\nimport { useAlerta } from '@/context/AlertaContext';\r\nimport { checkVerificationStatus, resendVerificationEmail } from '@/services/authService';\r\n\r\nexport function useVerificacion({ autoDetectParams = false }: { autoDetectParams?: boolean } = {}) {\r\n  const [email, setEmail] = useState('');\r\n  const [estado, setEstado] = useState<{ isEmailVerified: boolean; expiresAt?: string } | null>(null);\r\n  const [tiempoRestante, setTiempoRestante] = useState<number | null>(null);\r\n  const [cargando, setCargando] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const router = useRouter();\r\n  const params = useSearchParams();\r\n  const { mostrarAlerta } = useAlerta();\r\n\r\n  // Detectar email y expiresAt desde URL si se activa autoDetectParams\r\n  useEffect(() => {\r\n    if (!autoDetectParams || !params) return;\r\n\r\n    const emailParam = params.get('email');\r\n    const expiresParam = params.get('expiresAt');\r\n\r\n    if (emailParam) setEmail(emailParam);\r\n    if (expiresParam) {\r\n      const fecha = new Date(expiresParam);\r\n      setEstado({ isEmailVerified: false, expiresAt: fecha.toISOString() });\r\n    }\r\n  }, [autoDetectParams, params]);\r\n\r\n  // Temporizador si hay expiresAt\r\n  useEffect(() => {\r\n    if (!estado?.expiresAt) return;\r\n\r\n    const expirationDate = new Date(estado.expiresAt);\r\n    const updateTiempo = () => {\r\n      const restante = expirationDate.getTime() - Date.now();\r\n      setTiempoRestante(restante > 0 ? restante : 0);\r\n      if (restante <= 0) {\r\n        mostrarAlerta('Tu enlace de verificación ha expirado. Regístrate de nuevo.', 'error');\r\n        router.push('/auth/register');\r\n      }\r\n    };\r\n\r\n    updateTiempo();\r\n    const interval = setInterval(updateTiempo, 1000);\r\n    return () => clearInterval(interval);\r\n  }, [estado?.expiresAt, mostrarAlerta, router]);\r\n\r\n  const revisar = async (correo: string): Promise<string | null> => {\r\n    setCargando(true);\r\n    setError(null);\r\n    try {\r\n      const data = await checkVerificationStatus(correo);\r\n      setEstado(data);\r\n      setEmail(correo);\r\n      return null;\r\n    } catch (err: unknown) {\r\n      const mensaje =\r\n        err instanceof Error\r\n          ? err.message\r\n          : typeof err === 'object' && err !== null && 'message' in err\r\n          ? String((err as { message?: unknown }).message)\r\n          : 'No se encontró el correo o hubo un error.';\r\n      setError(mensaje);\r\n      return mensaje;\r\n    } finally {\r\n      setCargando(false);\r\n    }\r\n  };\r\n\r\n  const reenviar = async (): Promise<string | null> => {\r\n    setCargando(true);\r\n    setError(null);\r\n    try {\r\n      await resendVerificationEmail(email);\r\n      return null;\r\n    } catch (err: unknown) {\r\n      const mensaje =\r\n        err instanceof Error\r\n          ? err.message\r\n          : typeof err === 'object' && err !== null && 'message' in err\r\n          ? String((err as { message?: unknown }).message)\r\n          : 'Error al reenviar el correo.';\r\n      setError(mensaje);\r\n      return mensaje;\r\n    } finally {\r\n      setCargando(false);\r\n    }\r\n  };\r\n\r\n  return {\r\n    email,\r\n    setEmail,\r\n    estado,\r\n    cargando,\r\n    error,\r\n    tiempoRestante,\r\n    revisar,\r\n    reenviar,\r\n  };\r\n}\r\n"],"names":[],"mappings":"AAAA,uCAAuC;;;;;AACvC;AACA;AAEA;AACA;;;;;AAEO,SAAS,gBAAgB,EAAE,mBAAmB,KAAK,EAAkC,GAAG,CAAC,CAAC;IAC/F,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,gVAAQ,EAAC;IACnC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,gVAAQ,EAA0D;IAC9F,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,gVAAQ,EAAgB;IACpE,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,gVAAQ,EAAC;IACzC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,gVAAQ,EAAgB;IAElD,MAAM,SAAS,IAAA,8QAAS;IACxB,MAAM,SAAS,IAAA,oRAAe;IAC9B,MAAM,EAAE,aAAa,EAAE,GAAG,IAAA,6IAAS;IAEnC,qEAAqE;IACrE,IAAA,iVAAS,EAAC;QACR,IAAI,CAAC,oBAAoB,CAAC,QAAQ;QAElC,MAAM,aAAa,OAAO,GAAG,CAAC;QAC9B,MAAM,eAAe,OAAO,GAAG,CAAC;QAEhC,IAAI,YAAY,SAAS;QACzB,IAAI,cAAc;YAChB,MAAM,QAAQ,IAAI,KAAK;YACvB,UAAU;gBAAE,iBAAiB;gBAAO,WAAW,MAAM,WAAW;YAAG;QACrE;IACF,GAAG;QAAC;QAAkB;KAAO;IAE7B,gCAAgC;IAChC,IAAA,iVAAS,EAAC;QACR,IAAI,CAAC,QAAQ,WAAW;QAExB,MAAM,iBAAiB,IAAI,KAAK,OAAO,SAAS;QAChD,MAAM,eAAe;YACnB,MAAM,WAAW,eAAe,OAAO,KAAK,KAAK,GAAG;YACpD,kBAAkB,WAAW,IAAI,WAAW;YAC5C,IAAI,YAAY,GAAG;gBACjB,cAAc,+DAA+D;gBAC7E,OAAO,IAAI,CAAC;YACd;QACF;QAEA;QACA,MAAM,WAAW,YAAY,cAAc;QAC3C,OAAO,IAAM,cAAc;IAC7B,GAAG;QAAC,QAAQ;QAAW;QAAe;KAAO;IAE7C,MAAM,UAAU,OAAO;QACrB,YAAY;QACZ,SAAS;QACT,IAAI;YACF,MAAM,OAAO,MAAM,IAAA,yJAAuB,EAAC;YAC3C,UAAU;YACV,SAAS;YACT,OAAO;QACT,EAAE,OAAO,KAAc;YACrB,MAAM,UACJ,eAAe,QACX,IAAI,OAAO,GACX,OAAO,QAAQ,YAAY,QAAQ,QAAQ,aAAa,MACxD,OAAO,AAAC,IAA8B,OAAO,IAC7C;YACN,SAAS;YACT,OAAO;QACT,SAAU;YACR,YAAY;QACd;IACF;IAEA,MAAM,WAAW;QACf,YAAY;QACZ,SAAS;QACT,IAAI;YACF,MAAM,IAAA,yJAAuB,EAAC;YAC9B,OAAO;QACT,EAAE,OAAO,KAAc;YACrB,MAAM,UACJ,eAAe,QACX,IAAI,OAAO,GACX,OAAO,QAAQ,YAAY,QAAQ,QAAQ,aAAa,MACxD,OAAO,AAAC,IAA8B,OAAO,IAC7C;YACN,SAAS;YACT,OAAO;QACT,SAAU;YACR,YAAY;QACd;IACF;IAEA,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;IACF;AACF","debugId":null}},
    {"offset": {"line": 118, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pauli/Desktop/Digital_Nest/Proyects/Process_Girl/process_girl_web/frontend/src/app/auth/verificacion/correo/page.tsx"],"sourcesContent":["'use client';\r\nimport styles from '../VerificaCorreo.module.css';\r\n\r\nimport { useVerificacion } from '@/hooks/utils/useVerificacion';\r\n\r\nexport default function VerificaCorreo() {\r\n  const {\r\n    email,\r\n    setEmail,\r\n    tiempoRestante,\r\n    cargando,\r\n    reenviar,\r\n  } = useVerificacion({ autoDetectParams: true });;\r\n\r\n  const minutos = tiempoRestante ? Math.floor(tiempoRestante / 60000) : 0;\r\n  const segundos = tiempoRestante ? Math.floor((tiempoRestante % 60000) / 1000) : 0;\r\n\r\n  return (\r\n    <section className={styles.container}>\r\n      <h2>Verifica tu correo</h2>\r\n      <input\r\n        type=\"email\"\r\n        value={email}\r\n        onChange={(e) => setEmail(e.target.value)}\r\n        className={styles.input}\r\n        placeholder=\"Tu correo\"\r\n      />\r\n\r\n      {tiempoRestante !== null && tiempoRestante > 0 && (\r\n        <>\r\n          <p>Tu enlace expira en <strong>{minutos}:{segundos.toString().padStart(2, '0')}</strong></p>\r\n          <button onClick={reenviar} disabled={cargando || !email} className={styles.boton}>\r\n            {cargando ? 'Reenviando...' : 'Reenviar correo'}\r\n          </button>\r\n        </>\r\n      )}\r\n    </section>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AAEA;AAHA;;;;AAKe,SAAS;IACtB,MAAM,EACJ,KAAK,EACL,QAAQ,EACR,cAAc,EACd,QAAQ,EACR,QAAQ,EACT,GAAG,IAAA,2JAAe,EAAC;QAAE,kBAAkB;IAAK;;IAE7C,MAAM,UAAU,iBAAiB,KAAK,KAAK,CAAC,iBAAiB,SAAS;IACtE,MAAM,WAAW,iBAAiB,KAAK,KAAK,CAAC,AAAC,iBAAiB,QAAS,QAAQ;IAEhF,qBACE,6WAAC;QAAQ,WAAW,2KAAM,CAAC,SAAS;;0BAClC,6WAAC;0BAAG;;;;;;0BACJ,6WAAC;gBACC,MAAK;gBACL,OAAO;gBACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;gBACxC,WAAW,2KAAM,CAAC,KAAK;gBACvB,aAAY;;;;;;YAGb,mBAAmB,QAAQ,iBAAiB,mBAC3C;;kCACE,6WAAC;;4BAAE;0CAAoB,6WAAC;;oCAAQ;oCAAQ;oCAAE,SAAS,QAAQ,GAAG,QAAQ,CAAC,GAAG;;;;;;;;;;;;;kCAC1E,6WAAC;wBAAO,SAAS;wBAAU,UAAU,YAAY,CAAC;wBAAO,WAAW,2KAAM,CAAC,KAAK;kCAC7E,WAAW,kBAAkB;;;;;;;;;;;;;;AAM1C","debugId":null}}]
}