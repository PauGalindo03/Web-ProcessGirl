{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/pages/ProductoPage/modules/ProductoPage.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"colDerecha\": \"ProductoPage-module__43jBFG__colDerecha\",\n  \"colIzquierda\": \"ProductoPage-module__43jBFG__colIzquierda\",\n  \"grid\": \"ProductoPage-module__43jBFG__grid\",\n  \"page\": \"ProductoPage-module__43jBFG__page\",\n  \"testimonios\": \"ProductoPage-module__43jBFG__testimonios\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 13, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/pages/ProductoPage/modules/ProductoCTAFlotante.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"boton\": \"ProductoCTAFlotante-module__4b04Ia__boton\",\n  \"corazon\": \"ProductoCTAFlotante-module__4b04Ia__corazon\",\n  \"ctaFlotante\": \"ProductoCTAFlotante-module__4b04Ia__ctaFlotante\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pauli/Desktop/Digital_Nest/Proyects/Process_Girl/process_girl_web/frontend/src/fallbacks/fallUsuario.ts"],"sourcesContent":["import type { Usuario } from \"@types\";\r\n\r\nimport { fallbackProductos } from \"./fallProductos\";\r\n\r\nfunction buildFallUser(): Usuario {\r\n  return {\r\n    _id: \"user1\",\r\n    email: \"pau@example.com\",\r\n    nombres: \"Pau\",\r\n    apellidos: \"Dev\",\r\n    role: \"admin\",\r\n    username: \"pau_dev\",\r\n    fotoPerfilUrl: \"/images/perfil-pau.png\",\r\n    isEmailVerified: true,\r\n    fechaRegistro: \"\",\r\n\r\n    direccion: {\r\n      pais: \"México\",\r\n      calle: \"Laurel\",\r\n      numero: \"30\",\r\n      colonia: \"BellaVista\",\r\n      codigoPostal: \"78910\",\r\n      ciudad: \"Jiutepec\",\r\n      estado: \"Morelos\",\r\n    },\r\n\r\n    historialCompras: [\r\n      {\r\n        pedidoId: \"pedido-001\",\r\n        fechaCompra: new Date(\"2025-08-15\"),\r\n        totalPedido: 1800,\r\n        items: [\r\n          {\r\n            itemId: \"prod-fake-001\",\r\n            tipo: \"producto\",\r\n            nombre: \"Get your Shit Together\",\r\n            precioPagado: 960,\r\n            linkDescarga: \"/descargas/gyst.pdf\",\r\n          },\r\n          {\r\n            itemId: \"prod-fake-002\",\r\n            tipo: \"producto\",\r\n            nombre: \"Finanzas con tacones\",\r\n            precioPagado: 840,\r\n            linkDescarga: \"/descargas/fct.notion\",\r\n          },\r\n        ],\r\n      },\r\n    ],\r\n\r\n    cupones: [\r\n      {\r\n        codigo: \"BIENVENIDA20\",\r\n        tipoDescuento: \"porcentaje\",\r\n        activo: true,\r\n        aplicado: true,\r\n        descripcion: \"20% de descuento en tu primera compra\",\r\n        terminos: \"Válido solo una vez\",\r\n        valor: 20,\r\n        fechaExpiracion: new Date(\"2025-12-31\"),\r\n      },\r\n    ],\r\n\r\n    plantillasFavoritas: [fallbackProductos[0], fallbackProductos[1]],\r\n\r\n    nombreCompleto: \"Pau Dev\",\r\n    direccionCompleta: \"Laurel 30, BellaVista, 78910, Jiutepec, Morelos, México\",\r\n  };\r\n}\r\n\r\nexport const fallUser: Usuario = buildFallUser();\r\n"],"names":[],"mappings":";;;;AAEA;;AAEA,SAAS;IACP,OAAO;QACL,KAAK;QACL,OAAO;QACP,SAAS;QACT,WAAW;QACX,MAAM;QACN,UAAU;QACV,eAAe;QACf,iBAAiB;QACjB,eAAe;QAEf,WAAW;YACT,MAAM;YACN,OAAO;YACP,QAAQ;YACR,SAAS;YACT,cAAc;YACd,QAAQ;YACR,QAAQ;QACV;QAEA,kBAAkB;YAChB;gBACE,UAAU;gBACV,aAAa,IAAI,KAAK;gBACtB,aAAa;gBACb,OAAO;oBACL;wBACE,QAAQ;wBACR,MAAM;wBACN,QAAQ;wBACR,cAAc;wBACd,cAAc;oBAChB;oBACA;wBACE,QAAQ;wBACR,MAAM;wBACN,QAAQ;wBACR,cAAc;wBACd,cAAc;oBAChB;iBACD;YACH;SACD;QAED,SAAS;YACP;gBACE,QAAQ;gBACR,eAAe;gBACf,QAAQ;gBACR,UAAU;gBACV,aAAa;gBACb,UAAU;gBACV,OAAO;gBACP,iBAAiB,IAAI,KAAK;YAC5B;SACD;QAED,qBAAqB;YAAC,yJAAiB,CAAC,EAAE;YAAE,yJAAiB,CAAC,EAAE;SAAC;QAEjE,gBAAgB;QAChB,mBAAmB;IACrB;AACF;AAEO,MAAM,WAAoB","debugId":null}},
    {"offset": {"line": 99, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pauli/Desktop/Digital_Nest/Proyects/Process_Girl/process_girl_web/frontend/src/services/userService.ts"],"sourcesContent":["import type { Usuario, UsuarioInput, Cupon } from \"@types\";\r\n\r\nimport api from './api'\r\n\r\n// =======================\r\n// Obtener todos los usuarios (admin)\r\n// =======================\r\nexport async function getAllUsers(): Promise<Usuario[]> {\r\n  const res = await api.get<Usuario[]>('/users/admin')\r\n  return res.data\r\n}\r\n\r\n// =======================\r\n// Obtener usuario por ID\r\n// =======================\r\nexport async function getUserById(userId: string): Promise<Usuario> {\r\n  const res = await api.get<Usuario>(`/users/${userId}`)\r\n  return res.data\r\n}\r\n\r\n// =======================\r\n// Crear usuario\r\n// =======================\r\nexport async function createUser(data: UsuarioInput): Promise<Usuario> {\r\n  const res = await api.post<Usuario>('/users', data)\r\n  return res.data\r\n}\r\n\r\n// =======================\r\n// Actualizar usuario por ID\r\n// =======================\r\nexport async function updateUserById(\r\n  userId: string,\r\n  data: Partial<UsuarioInput>\r\n): Promise<Usuario> {\r\n  const res = await api.put<Usuario>(`/users/${userId}`, data)\r\n  return res.data\r\n}\r\n\r\n// =======================\r\n// Eliminar usuario\r\n// =======================\r\nexport async function deleteUserById(userId: string) {\r\n  await api.delete(`/users/${userId}`)\r\n}\r\n\r\n// =======================\r\n// Actualizar perfil propio\r\n// =======================\r\nexport async function updateMyProfile(data: FormData): Promise<Usuario> {\r\n  const res = await api.put<Usuario>('/users/me', data, {\r\n    headers: { 'Content-Type': 'multipart/form-data' },\r\n  })\r\n  return res.data\r\n}\r\n\r\n// =======================\r\n// Cambiar contraseña propia\r\n// =======================\r\nexport async function changeMyPassword(oldPassword: string, newPassword: string) {\r\n  const res = await api.put('/users/me/password', { oldPassword, newPassword })\r\n  return res.data\r\n}\r\n\r\n// =======================\r\n// Obtener avatares predefinidos\r\n// =======================\r\nexport async function getPredefinedAvatars(): Promise<string[]> {\r\n  const res = await api.get<string[]>('/users/avatars/predefined')\r\n  return res.data\r\n}\r\n\r\n// =======================\r\n// Toggle plantilla favorita\r\n// =======================\r\nexport async function toggleFavoriteTemplate(plantillaId: string): Promise<Usuario> {\r\n  const res = await api.post<Usuario>(`/users/me/favorites/${plantillaId}`)\r\n  return res.data\r\n}\r\n\r\n// =======================\r\n// Agregar cupón al usuario\r\n// =======================\r\nexport async function addCouponToUser(couponData: Partial<Cupon>): Promise<Usuario> {\r\n  const res = await api.post<Usuario>('/users/me/coupons', couponData)\r\n  return res.data\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAEA;;AAKO,eAAe;IACpB,MAAM,MAAM,MAAM,oIAAG,CAAC,GAAG,CAAY;IACrC,OAAO,IAAI,IAAI;AACjB;AAKO,eAAe,YAAY,MAAc;IAC9C,MAAM,MAAM,MAAM,oIAAG,CAAC,GAAG,CAAU,AAAC,UAAgB,OAAP;IAC7C,OAAO,IAAI,IAAI;AACjB;AAKO,eAAe,WAAW,IAAkB;IACjD,MAAM,MAAM,MAAM,oIAAG,CAAC,IAAI,CAAU,UAAU;IAC9C,OAAO,IAAI,IAAI;AACjB;AAKO,eAAe,eACpB,MAAc,EACd,IAA2B;IAE3B,MAAM,MAAM,MAAM,oIAAG,CAAC,GAAG,CAAU,AAAC,UAAgB,OAAP,SAAU;IACvD,OAAO,IAAI,IAAI;AACjB;AAKO,eAAe,eAAe,MAAc;IACjD,MAAM,oIAAG,CAAC,MAAM,CAAC,AAAC,UAAgB,OAAP;AAC7B;AAKO,eAAe,gBAAgB,IAAc;IAClD,MAAM,MAAM,MAAM,oIAAG,CAAC,GAAG,CAAU,aAAa,MAAM;QACpD,SAAS;YAAE,gBAAgB;QAAsB;IACnD;IACA,OAAO,IAAI,IAAI;AACjB;AAKO,eAAe,iBAAiB,WAAmB,EAAE,WAAmB;IAC7E,MAAM,MAAM,MAAM,oIAAG,CAAC,GAAG,CAAC,sBAAsB;QAAE;QAAa;IAAY;IAC3E,OAAO,IAAI,IAAI;AACjB;AAKO,eAAe;IACpB,MAAM,MAAM,MAAM,oIAAG,CAAC,GAAG,CAAW;IACpC,OAAO,IAAI,IAAI;AACjB;AAKO,eAAe,uBAAuB,WAAmB;IAC9D,MAAM,MAAM,MAAM,oIAAG,CAAC,IAAI,CAAU,AAAC,uBAAkC,OAAZ;IAC3D,OAAO,IAAI,IAAI;AACjB;AAKO,eAAe,gBAAgB,UAA0B;IAC9D,MAAM,MAAM,MAAM,oIAAG,CAAC,IAAI,CAAU,qBAAqB;IACzD,OAAO,IAAI,IAAI;AACjB","debugId":null}},
    {"offset": {"line": 176, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pauli/Desktop/Digital_Nest/Proyects/Process_Girl/process_girl_web/frontend/src/hooks/useUser.ts"],"sourcesContent":["// src/app/hooks/useUser.ts\r\nimport { useState, useEffect, useCallback } from 'react';\r\n\r\nimport type { Usuario, Cupon } from \"@types\";\r\n\r\nimport { fallUser } from \"@/fallbacks/fallUsuario\";\r\nimport * as userService from '@/services/userService';\r\n\r\nconst usarFallback = process.env.NEXT_PUBLIC_USE_FAKE_DATA === \"true\";\r\n\r\nexport function useUser(userId?: string) {\r\n  const [user, setUser] = useState<Usuario | null>(null);\r\n  const [loading, setLoading] = useState<boolean>(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [avatars, setAvatars] = useState<string[]>([]);\r\n\r\n  // =======================\r\n  // Cargar usuario por ID\r\n  // =======================\r\n  const fetchUser = useCallback(async () => {\r\n  if (!userId) return;\r\n  setLoading(true);\r\n  setError(null);\r\n  try {\r\n    if (usarFallback) {\r\n      console.warn(\"Usando fallback de usuario\");\r\n      setUser(fallUser);\r\n      return;\r\n    }\r\n\r\n    const data = await userService.getUserById(userId);\r\n    setUser(data);\r\n  } catch (err: unknown) {\r\n    if (usarFallback) {\r\n      console.warn(\"Error real, usando fallback de usuario\");\r\n      setUser(fallUser);\r\n    }\r\n\r\n    if (err instanceof Error) setError(err.message);\r\n    else setError(\"Error al cargar usuario\");\r\n  } finally {\r\n    setLoading(false);\r\n  }\r\n}, [userId]);\r\n\r\n\r\n  // =======================\r\n  // Refrescar usuario\r\n  // =======================\r\n  const refresh = () => fetchUser();\r\n\r\n  // =======================\r\n  // Actualizar perfil\r\n  // data: FormData para incluir foto\r\n  // =======================\r\n  const updateProfile = async (data: FormData) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const updatedUser = await userService.updateMyProfile(data);\r\n      setUser(updatedUser);\r\n      return updatedUser;\r\n    } catch (err: unknown) {\r\n      if (err instanceof Error) setError(err.message);\r\n      else setError('Error al actualizar perfil');\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // =======================\r\n  // Cambiar contraseña\r\n  // =======================\r\n  const changePassword = async (oldPassword: string, newPassword: string) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      return await userService.changeMyPassword(oldPassword, newPassword);\r\n    } catch (err: unknown) {\r\n      if (err instanceof Error) setError(err.message);\r\n      else setError('Error al cambiar contraseña');\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // =======================\r\n  // Toggle plantilla favorita\r\n  // =======================\r\n  const esFavorito = (plantillaId: string) =>\r\n  user?.plantillasFavoritas?.some((p) => typeof p === \"string\"\r\n    ? p === plantillaId\r\n    : p._id === plantillaId\r\n  );\r\n  const toggleFavorite = async (plantillaId: string) => {\r\n    if (!user) return;\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const updatedUser = await userService.toggleFavoriteTemplate(plantillaId);\r\n      setUser(updatedUser);\r\n      return updatedUser;\r\n    } catch (err: unknown) {\r\n      if (err instanceof Error) setError(err.message);\r\n      else setError('Error al actualizar favoritos');\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // =======================\r\n  // Agregar cupón\r\n  // =======================\r\n  const addCoupon = async (couponData: Partial<Cupon>) => {\r\n    if (!user) return;\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const updatedUser = await userService.addCouponToUser(couponData);\r\n      setUser(updatedUser);\r\n      return updatedUser;\r\n    } catch (err: unknown) {\r\n      if (err instanceof Error) setError(err.message);\r\n      else setError('Error al agregar cupón');\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // =======================\r\n  // Cargar avatares predefinidos\r\n  // =======================\r\n  const fetchPredefinedAvatars = async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const urls = await userService.getPredefinedAvatars();\r\n      setAvatars(urls);\r\n      return urls;\r\n    } catch (err: unknown) {\r\n      if (err instanceof Error) setError(err.message);\r\n      else setError('Error al cargar avatares');\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // =======================\r\n  // Inicializar carga de usuario si existe userId\r\n  // =======================\r\n  useEffect(() => {\r\n    fetchUser();\r\n  }, [fetchUser]);\r\n\r\n  return {\r\n    user,\r\n    setUser,\r\n    loading,\r\n    error,\r\n    avatars,\r\n    refresh,\r\n    updateProfile,\r\n    changePassword,\r\n    esFavorito,\r\n    toggleFavorite,\r\n    addCoupon,\r\n    fetchPredefinedAvatars,\r\n  };\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 359, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pauli/Desktop/Digital_Nest/Proyects/Process_Girl/process_girl_web/frontend/src/pages/ProductoPage/ProductoCTAFlotante.tsx"],"sourcesContent":["\"use client\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\n\r\nimport type { ProductoDigital } from \"@types\";\r\n\r\nimport styles from \"./modules/ProductoCTAFlotante.module.css\";\r\n\r\nimport { useCarrito } from \"@/hooks/useCarrito\";\r\nimport { useUser } from \"@/hooks/useUser\";\r\n\r\ntype Props = {\r\n  producto: ProductoDigital;\r\n};\r\n\r\nexport default function ProductoCTAFlotante({ producto }: Props) {\r\n  const { user, toggleFavorite } = useUser();\r\n  const { addItem } = useCarrito();\r\n  const router = useRouter();\r\n  const [hideCTA, setHideCTA] = useState(false);\r\n  const footerRef = useRef<HTMLElement | null>(null);\r\n\r\n  const handleAddToCart = () => {\r\n    addItem({ ...producto, tipo: \"producto\" });\r\n  };\r\n\r\n  const handleFavorito = () => {\r\n    if (!user) {\r\n      router.push(\"/login\");\r\n    } else {\r\n      toggleFavorite(producto._id);\r\n    }\r\n  };\r\n\r\n  const isSoldOut =\r\n    producto.esEdicionLimitada &&\r\n    typeof producto.disponibilidad === \"number\" &&\r\n    producto.disponibilidad <= 0;\r\n\r\n  useEffect(() => {\r\n    const footer = document.querySelector(\"footer\");\r\n    footerRef.current = footer as HTMLElement;\r\n\r\n    if (!footer) return;\r\n\r\n    const observer = new IntersectionObserver(\r\n      (entries) => {\r\n        entries.forEach((entry) => {\r\n          setHideCTA(entry.isIntersecting);\r\n        });\r\n      },\r\n      { threshold: 0.1 }\r\n    );\r\n\r\n    observer.observe(footer);\r\n    return () => observer.disconnect();\r\n  }, []);\r\n\r\n  return (\r\n    !hideCTA && (\r\n      <div className={styles.ctaFlotante}>\r\n        <button\r\n          type=\"button\"\r\n          onClick={handleAddToCart}\r\n          disabled={isSoldOut}\r\n          className={styles.boton}\r\n        >\r\n          {isSoldOut ? \"Agotado\" : \"Agregar al carrito\"}\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          onClick={handleFavorito}\r\n          className={styles.corazon}\r\n        >\r\n          ❤️\r\n        </button>\r\n      </div>\r\n    )\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AAIA;AAEA;AACA;;;AATA;;;;;;AAee,SAAS,oBAAoB,KAAmB;QAAnB,EAAE,QAAQ,EAAS,GAAnB;;IAC1C,MAAM,EAAE,IAAI,EAAE,cAAc,EAAE,GAAG,IAAA,qIAAO;IACxC,MAAM,EAAE,OAAO,EAAE,GAAG,IAAA,2IAAU;IAC9B,MAAM,SAAS,IAAA,iRAAS;IACxB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,wSAAQ,EAAC;IACvC,MAAM,YAAY,IAAA,sSAAM,EAAqB;IAE7C,MAAM,kBAAkB;QACtB,QAAQ;YAAE,GAAG,QAAQ;YAAE,MAAM;QAAW;IAC1C;IAEA,MAAM,iBAAiB;QACrB,IAAI,CAAC,MAAM;YACT,OAAO,IAAI,CAAC;QACd,OAAO;YACL,eAAe,SAAS,GAAG;QAC7B;IACF;IAEA,MAAM,YACJ,SAAS,iBAAiB,IAC1B,OAAO,SAAS,cAAc,KAAK,YACnC,SAAS,cAAc,IAAI;IAE7B,IAAA,ySAAS;yCAAC;YACR,MAAM,SAAS,SAAS,aAAa,CAAC;YACtC,UAAU,OAAO,GAAG;YAEpB,IAAI,CAAC,QAAQ;YAEb,MAAM,WAAW,IAAI;iDACnB,CAAC;oBACC,QAAQ,OAAO;yDAAC,CAAC;4BACf,WAAW,MAAM,cAAc;wBACjC;;gBACF;gDACA;gBAAE,WAAW;YAAI;YAGnB,SAAS,OAAO,CAAC;YACjB;iDAAO,IAAM,SAAS,UAAU;;QAClC;wCAAG,EAAE;IAEL,OACE,CAAC,yBACC,4TAAC;QAAI,WAAW,wLAAM,CAAC,WAAW;;0BAChC,4TAAC;gBACC,MAAK;gBACL,SAAS;gBACT,UAAU;gBACV,WAAW,wLAAM,CAAC,KAAK;0BAEtB,YAAY,YAAY;;;;;;0BAE3B,4TAAC;gBACC,MAAK;gBACL,SAAS;gBACT,WAAW,wLAAM,CAAC,OAAO;0BAC1B;;;;;;;;;;;;AAMT;GAhEwB;;QACW,qIAAO;QACpB,2IAAU;QACf,iRAAS;;;KAHF","debugId":null}},
    {"offset": {"line": 468, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/pages/ProductoPage/modules/ProductoDetalles.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"detalles\": \"ProductoDetalles-module__ElJYOq__detalles\",\n  \"link\": \"ProductoDetalles-module__ElJYOq__link\",\n  \"lista\": \"ProductoDetalles-module__ElJYOq__lista\",\n  \"titulo\": \"ProductoDetalles-module__ElJYOq__titulo\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 478, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pauli/Desktop/Digital_Nest/Proyects/Process_Girl/process_girl_web/frontend/src/pages/ProductoPage/ProductoDetalles.tsx"],"sourcesContent":["\"use client\";\r\nimport type { ProductoDigital } from \"@types\";\r\n\r\nimport styles from \"./modules/ProductoDetalles.module.css\";\r\n\r\ntype Props = {\r\n  producto: ProductoDigital;\r\n};\r\n\r\nexport default function ProductoDetalles({ producto }: Props) {\r\n  const { sku, categoria, paquete } = producto;\r\n\r\n  return (\r\n    <section className={styles.detalles}>\r\n      <h2 className={styles.titulo}>Detalles del producto</h2>\r\n      <ul className={styles.lista}>\r\n        <li>\r\n          <strong>SKU:</strong> {sku}\r\n        </li>\r\n\r\n        {Array.isArray(categoria) && categoria.length > 0 && (\r\n          <li>\r\n            <strong>Categorías:</strong>{\" \"}\r\n            {categoria.map((c) => c.nombre).join(\", \")}\r\n          </li>\r\n        )}\r\n\r\n        {Array.isArray(paquete) && paquete.length > 0 && (\r\n          <li>\r\n            <strong>Incluido en:</strong>{\" \"}\r\n            {paquete.map((p) => (\r\n              <a\r\n                key={p._id}\r\n                href={`/sistemas/paquete/${p.sku}`}\r\n                className={styles.link}\r\n              >\r\n                {p.titulo}\r\n              </a>\r\n            ))}\r\n          </li>\r\n        )}\r\n      </ul>\r\n    </section>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAGA;AAHA;;;AASe,SAAS,iBAAiB,KAAmB;QAAnB,EAAE,QAAQ,EAAS,GAAnB;IACvC,MAAM,EAAE,GAAG,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG;IAEpC,qBACE,4TAAC;QAAQ,WAAW,qLAAM,CAAC,QAAQ;;0BACjC,4TAAC;gBAAG,WAAW,qLAAM,CAAC,MAAM;0BAAE;;;;;;0BAC9B,4TAAC;gBAAG,WAAW,qLAAM,CAAC,KAAK;;kCACzB,4TAAC;;0CACC,4TAAC;0CAAO;;;;;;4BAAa;4BAAE;;;;;;;oBAGxB,MAAM,OAAO,CAAC,cAAc,UAAU,MAAM,GAAG,mBAC9C,4TAAC;;0CACC,4TAAC;0CAAO;;;;;;4BAAqB;4BAC5B,UAAU,GAAG,CAAC,CAAC,IAAM,EAAE,MAAM,EAAE,IAAI,CAAC;;;;;;;oBAIxC,MAAM,OAAO,CAAC,YAAY,QAAQ,MAAM,GAAG,mBAC1C,4TAAC;;0CACC,4TAAC;0CAAO;;;;;;4BAAsB;4BAC7B,QAAQ,GAAG,CAAC,CAAC,kBACZ,4TAAC;oCAEC,MAAM,AAAC,qBAA0B,OAAN,EAAE,GAAG;oCAChC,WAAW,qLAAM,CAAC,IAAI;8CAErB,EAAE,MAAM;mCAJJ,EAAE,GAAG;;;;;;;;;;;;;;;;;;;;;;;AAY1B;KAnCwB","debugId":null}},
    {"offset": {"line": 585, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/pages/ProductoPage/modules/ProductoImagen.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"badge\": \"ProductoImagen-module__8I5Mcq__badge\",\n  \"imagen\": \"ProductoImagen-module__8I5Mcq__imagen\",\n  \"imagenBox\": \"ProductoImagen-module__8I5Mcq__imagenBox\",\n  \"imagenWrapper\": \"ProductoImagen-module__8I5Mcq__imagenWrapper\",\n  \"stock\": \"ProductoImagen-module__8I5Mcq__stock\",\n  \"verMas\": \"ProductoImagen-module__8I5Mcq__verMas\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 597, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pauli/Desktop/Digital_Nest/Proyects/Process_Girl/process_girl_web/frontend/src/pages/ProductoPage/ProductoImagen.tsx"],"sourcesContent":["\"use client\";\r\nimport { useState } from \"react\";\r\n\r\nimport type { ProductoDigital } from \"@types\";\r\n\r\nimport styles from \"./modules/ProductoImagen.module.css\";\r\n\r\nimport ModalGaleria from \"@/components/common/media/ModalGaleria\";\r\n\r\ntype Props = {\r\n  producto: ProductoDigital;\r\n};\r\n\r\nexport default function ProductoImagen({ producto }: Props) {\r\n  const [modalOpen, setModalOpen] = useState(false);\r\n\r\n  const mainImage =\r\n    producto.imagenes?.find((img) => img.endsWith(\"cuadrada.png\")) ??\r\n    \"/img/placeholder-catalog.png\";\r\n\r\n  const isSoldOut =\r\n    producto.esEdicionLimitada &&\r\n    typeof producto.disponibilidad === \"number\" &&\r\n    producto.disponibilidad <= 0;\r\n\r\n  return (\r\n    <div className={styles.imagenBox}>\r\n      <div className={styles.imagenWrapper}>\r\n        <img src={mainImage} alt={producto.titulo} className={styles.imagen} />\r\n\r\n        {producto.esEdicionLimitada && (\r\n          <div className={styles.badge}>Edición limitada</div>\r\n        )}\r\n\r\n        {producto.esEdicionLimitada &&\r\n          typeof producto.disponibilidad === \"number\" && (\r\n            <p className={styles.stock}>\r\n              {isSoldOut\r\n                ? \"Agotado\"\r\n                : `Disponibles: ${producto.disponibilidad}`}\r\n            </p>\r\n          )}\r\n\r\n        {producto.imagenes && producto.imagenes.length > 1 && (\r\n          <button\r\n            className={styles.verMas}\r\n            onClick={() => setModalOpen(true)}\r\n            type=\"button\"\r\n          >\r\n            Ver más\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      {modalOpen && (\r\n        <ModalGaleria\r\n          imagenes={producto.imagenes}\r\n          onClose={() => setModalOpen(false)}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AAIA;AAEA;;;AAPA;;;;AAae,SAAS,eAAe,KAAmB;QAAnB,EAAE,QAAQ,EAAS,GAAnB;QAInC;;IAHF,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,wSAAQ,EAAC;QAGzC;IADF,MAAM,YACJ,CAAA,2BAAA,qBAAA,SAAS,QAAQ,cAAjB,yCAAA,mBAAmB,IAAI,CAAC,CAAC,MAAQ,IAAI,QAAQ,CAAC,8BAA9C,qCAAA,0BACA;IAEF,MAAM,YACJ,SAAS,iBAAiB,IAC1B,OAAO,SAAS,cAAc,KAAK,YACnC,SAAS,cAAc,IAAI;IAE7B,qBACE,4TAAC;QAAI,WAAW,mLAAM,CAAC,SAAS;;0BAC9B,4TAAC;gBAAI,WAAW,mLAAM,CAAC,aAAa;;kCAClC,4TAAC;wBAAI,KAAK;wBAAW,KAAK,SAAS,MAAM;wBAAE,WAAW,mLAAM,CAAC,MAAM;;;;;;oBAElE,SAAS,iBAAiB,kBACzB,4TAAC;wBAAI,WAAW,mLAAM,CAAC,KAAK;kCAAE;;;;;;oBAG/B,SAAS,iBAAiB,IACzB,OAAO,SAAS,cAAc,KAAK,0BACjC,4TAAC;wBAAE,WAAW,mLAAM,CAAC,KAAK;kCACvB,YACG,YACA,AAAC,gBAAuC,OAAxB,SAAS,cAAc;;;;;;oBAIhD,SAAS,QAAQ,IAAI,SAAS,QAAQ,CAAC,MAAM,GAAG,mBAC/C,4TAAC;wBACC,WAAW,mLAAM,CAAC,MAAM;wBACxB,SAAS,IAAM,aAAa;wBAC5B,MAAK;kCACN;;;;;;;;;;;;YAMJ,2BACC,4TAAC,mKAAY;gBACX,UAAU,SAAS,QAAQ;gBAC3B,SAAS,IAAM,aAAa;;;;;;;;;;;;AAKtC;GAjDwB;KAAA","debugId":null}},
    {"offset": {"line": 691, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/pages/ProductoPage/modules/ProductoInfo.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"descripcion\": \"ProductoInfo-module__YhCCfG__descripcion\",\n  \"descripcionLarga\": \"ProductoInfo-module__YhCCfG__descripcionLarga\",\n  \"infoBox\": \"ProductoInfo-module__YhCCfG__infoBox\",\n  \"precioBase\": \"ProductoInfo-module__YhCCfG__precioBase\",\n  \"precioBox\": \"ProductoInfo-module__YhCCfG__precioBox\",\n  \"precioFinal\": \"ProductoInfo-module__YhCCfG__precioFinal\",\n  \"titulo\": \"ProductoInfo-module__YhCCfG__titulo\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 704, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pauli/Desktop/Digital_Nest/Proyects/Process_Girl/process_girl_web/frontend/src/pages/ProductoPage/ProductoInfo.tsx"],"sourcesContent":["\"use client\";\r\nimport type { ProductoDigital } from \"@types\";\r\n\r\nimport styles from \"./modules/ProductoInfo.module.css\";\r\n\r\ntype Props = {\r\n  producto: ProductoDigital;\r\n};\r\n\r\nexport default function ProductoInfo({ producto }: Props) {\r\n  const { titulo, precioBase, precioFinal, descripcion, descripcionLarga } = producto;\r\n\r\n  return (\r\n    <div className={styles.infoBox}>\r\n      <h1 className={styles.titulo}>{titulo}</h1>\r\n\r\n      <div className={styles.precioBox}>\r\n        <span className={styles.precioFinal}>\r\n          {precioFinal ? `$${precioFinal}` : \"Gratis\"}\r\n        </span>\r\n        {precioBase > (precioFinal ?? 0) && (\r\n          <span className={styles.precioBase}>${precioBase}</span>\r\n        )}\r\n      </div>\r\n\r\n      {descripcion && (\r\n        <p className={styles.descripcion}>{descripcion}</p>\r\n      )}\r\n\r\n      {descripcionLarga && (\r\n        <div\r\n          className={styles.descripcionLarga}\r\n          dangerouslySetInnerHTML={{ __html: descripcionLarga }}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAGA;AAHA;;;AASe,SAAS,aAAa,KAAmB;QAAnB,EAAE,QAAQ,EAAS,GAAnB;IACnC,MAAM,EAAE,MAAM,EAAE,UAAU,EAAE,WAAW,EAAE,WAAW,EAAE,gBAAgB,EAAE,GAAG;IAE3E,qBACE,4TAAC;QAAI,WAAW,iLAAM,CAAC,OAAO;;0BAC5B,4TAAC;gBAAG,WAAW,iLAAM,CAAC,MAAM;0BAAG;;;;;;0BAE/B,4TAAC;gBAAI,WAAW,iLAAM,CAAC,SAAS;;kCAC9B,4TAAC;wBAAK,WAAW,iLAAM,CAAC,WAAW;kCAChC,cAAc,AAAC,IAAe,OAAZ,eAAgB;;;;;;oBAEpC,aAAa,CAAC,wBAAA,yBAAA,cAAe,CAAC,mBAC7B,4TAAC;wBAAK,WAAW,iLAAM,CAAC,UAAU;;4BAAE;4BAAE;;;;;;;;;;;;;YAIzC,6BACC,4TAAC;gBAAE,WAAW,iLAAM,CAAC,WAAW;0BAAG;;;;;;YAGpC,kCACC,4TAAC;gBACC,WAAW,iLAAM,CAAC,gBAAgB;gBAClC,yBAAyB;oBAAE,QAAQ;gBAAiB;;;;;;;;;;;;AAK9D;KA5BwB","debugId":null}},
    {"offset": {"line": 789, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/pages/ProductoPage/modules/ProductoPrecioBox.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"ahorro\": \"ProductoPrecioBox-module__niAGmq__ahorro\",\n  \"label\": \"ProductoPrecioBox-module__niAGmq__label\",\n  \"portalButton\": \"ProductoPrecioBox-module__niAGmq__portalButton\",\n  \"precioFinal\": \"ProductoPrecioBox-module__niAGmq__precioFinal\",\n  \"valor\": \"ProductoPrecioBox-module__niAGmq__valor\",\n  \"valorBox\": \"ProductoPrecioBox-module__niAGmq__valorBox\",\n  \"valorItem\": \"ProductoPrecioBox-module__niAGmq__valorItem\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 802, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pauli/Desktop/Digital_Nest/Proyects/Process_Girl/process_girl_web/frontend/src/pages/ProductoPage/ProductoPrecioBox.tsx"],"sourcesContent":["\"use client\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nimport type { ProductoDigital } from \"@types\";\r\n\r\nimport styles from \"./modules/ProductoPrecioBox.module.css\";\r\n\r\ntype Props = {\r\n  producto: ProductoDigital;\r\n  onCTA: () => void;\r\n};\r\n\r\nexport default function ProductoPrecioBox({ producto, onCTA }: Props) {\r\n  const { precioBase, precioFinal, descuento } = producto;\r\n\r\n  const ahorro =\r\n    precioBase && precioFinal ? precioBase - precioFinal : undefined;\r\n\r\n  return (\r\n    <div className={styles.valorBox}>\r\n      <div className={styles.valorItem}>\r\n        <span className={styles.label}>Precio base:</span>\r\n        <span className={styles.valor}>${precioBase.toFixed(2)}</span>\r\n      </div>\r\n      <div className={styles.valorItem}>\r\n        <span className={styles.label}>Precio final:</span>\r\n        <span className={styles.precioFinal}>\r\n          ${precioFinal?.toFixed(2) ?? precioBase.toFixed(2)}\r\n        </span>\r\n      </div>\r\n      {ahorro && ahorro > 0 && (\r\n        <div className={styles.valorItem}>\r\n          <span className={styles.label}>Ahorro:</span>\r\n          <span className={styles.ahorro}>${ahorro.toFixed(2)}</span>\r\n        </div>\r\n      )}\r\n      {descuento && descuento > 0 && (\r\n        <div className={styles.valorItem}>\r\n          <span className={styles.label}>Descuento:</span>\r\n          <span className={styles.descuento}>{descuento}%</span>\r\n        </div>\r\n      )}\r\n\r\n      <motion.button\r\n        whileHover={{\r\n          scale: 1.05,\r\n          boxShadow: \"0 0 20px rgba(0, 200, 255, 0.6)\",\r\n          background: \"radial-gradient(circle, #6da7cc, #ddeffa)\",\r\n        }}\r\n        transition={{ type: \"spring\", stiffness: 300, damping: 20 }}\r\n        className={styles.portalButton}\r\n        onClick={onCTA}\r\n      >\r\n        Lo quiero\r\n      </motion.button>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AAIA;AALA;;;;AAYe,SAAS,kBAAkB,KAA0B;QAA1B,EAAE,QAAQ,EAAE,KAAK,EAAS,GAA1B;IACxC,MAAM,EAAE,UAAU,EAAE,WAAW,EAAE,SAAS,EAAE,GAAG;IAE/C,MAAM,SACJ,cAAc,cAAc,aAAa,cAAc;QAW/C;IATV,qBACE,4TAAC;QAAI,WAAW,sLAAM,CAAC,QAAQ;;0BAC7B,4TAAC;gBAAI,WAAW,sLAAM,CAAC,SAAS;;kCAC9B,4TAAC;wBAAK,WAAW,sLAAM,CAAC,KAAK;kCAAE;;;;;;kCAC/B,4TAAC;wBAAK,WAAW,sLAAM,CAAC,KAAK;;4BAAE;4BAAE,WAAW,OAAO,CAAC;;;;;;;;;;;;;0BAEtD,4TAAC;gBAAI,WAAW,sLAAM,CAAC,SAAS;;kCAC9B,4TAAC;wBAAK,WAAW,sLAAM,CAAC,KAAK;kCAAE;;;;;;kCAC/B,4TAAC;wBAAK,WAAW,sLAAM,CAAC,WAAW;;4BAAE;4BACjC,CAAA,uBAAA,wBAAA,kCAAA,YAAa,OAAO,CAAC,gBAArB,kCAAA,uBAA2B,WAAW,OAAO,CAAC;;;;;;;;;;;;;YAGnD,UAAU,SAAS,mBAClB,4TAAC;gBAAI,WAAW,sLAAM,CAAC,SAAS;;kCAC9B,4TAAC;wBAAK,WAAW,sLAAM,CAAC,KAAK;kCAAE;;;;;;kCAC/B,4TAAC;wBAAK,WAAW,sLAAM,CAAC,MAAM;;4BAAE;4BAAE,OAAO,OAAO,CAAC;;;;;;;;;;;;;YAGpD,aAAa,YAAY,mBACxB,4TAAC;gBAAI,WAAW,sLAAM,CAAC,SAAS;;kCAC9B,4TAAC;wBAAK,WAAW,sLAAM,CAAC,KAAK;kCAAE;;;;;;kCAC/B,4TAAC;wBAAK,WAAW,sLAAM,CAAC,SAAS;;4BAAG;4BAAU;;;;;;;;;;;;;0BAIlD,4TAAC,6SAAM,CAAC,MAAM;gBACZ,YAAY;oBACV,OAAO;oBACP,WAAW;oBACX,YAAY;gBACd;gBACA,YAAY;oBAAE,MAAM;oBAAU,WAAW;oBAAK,SAAS;gBAAG;gBAC1D,WAAW,sLAAM,CAAC,YAAY;gBAC9B,SAAS;0BACV;;;;;;;;;;;;AAKP;KA7CwB","debugId":null}},
    {"offset": {"line": 968, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/pages/ProductoPage/modules/ProductoTestimonios.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"estrella\": \"ProductoTestimonios-module__JP-M3a__estrella\",\n  \"form\": \"ProductoTestimonios-module__JP-M3a__form\",\n  \"item\": \"ProductoTestimonios-module__JP-M3a__item\",\n  \"lista\": \"ProductoTestimonios-module__JP-M3a__lista\",\n  \"rating\": \"ProductoTestimonios-module__JP-M3a__rating\",\n  \"stars\": \"ProductoTestimonios-module__JP-M3a__stars\",\n  \"testimonios\": \"ProductoTestimonios-module__JP-M3a__testimonios\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 981, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pauli/Desktop/Digital_Nest/Proyects/Process_Girl/process_girl_web/frontend/src/pages/ProductoPage/ProductoTestimonios.tsx"],"sourcesContent":["\"use client\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useState } from \"react\";\r\n\r\nimport type { TestimonioInput, ProductoDigital, Usuario } from \"@types\";\r\n\r\nimport styles from \"./modules/ProductoTestimonios.module.css\";\r\n\r\nimport { AnimatedIcon } from \"@/components/common\";\r\nimport { useTestimonios } from \"@/hooks/useTestimonio\";\r\nimport * as testimonioService from \"@/services/testimonioService\";\r\n\r\ntype Props = {\r\n  producto: ProductoDigital;\r\n  user?: Usuario | null;\r\n};\r\n\r\nexport default function ProductoTestimonios({ producto, user }: Props) {\r\n  const router = useRouter();\r\n  const { testimonios, refresh } = useTestimonios(false);\r\n  const [testimonio, setTestimonio] = useState(\"\");\r\n  const [rating, setRating] = useState(0);\r\n  const [hoverRating, setHoverRating] = useState(0);\r\n  const [clickedStar, setClickedStar] = useState<number | null>(null);\r\n\r\n  const [submitting, setSubmitting] = useState(false);\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!testimonio.trim()) return;\r\n\r\n    if (!user || !user._id || !user.username) {\r\n      router.push(\"/login\");\r\n      return;\r\n    }\r\n\r\n    setSubmitting(true);\r\n\r\n    const payload: TestimonioInput = {\r\n      nombre: user.username, // ahora TypeScript sabe que es string\r\n      testimonio,\r\n      rating,\r\n      producto: producto._id,\r\n      user: user._id,\r\n    };\r\n\r\n    await testimonioService.create(payload);\r\n\r\n    setTestimonio(\"\");\r\n    setRating(5);\r\n    setSubmitting(false);\r\n    refresh();\r\n  };\r\n\r\n  return (\r\n    <section className={styles.testimonios}>\r\n      <h2>Testimonios</h2>\r\n\r\n      <form onSubmit={handleSubmit} className={styles.form}>\r\n        <div className={styles.stars} onMouseLeave={() => setHoverRating(0)}>\r\n          {[1, 2, 3, 4, 5].map((r) => (\r\n            <span\r\n              aria-label=\"Calificar producto\"\r\n              key={r}\r\n              role=\"button\"\r\n              tabIndex={0}\r\n              onClick={() => {\r\n                setRating(r);\r\n                setClickedStar(r);\r\n                setTimeout(() => setClickedStar(null), 300);\r\n              }}\r\n              onKeyDown={(e) => {\r\n                if (e.key === \"Enter\" || e.key === \" \") {\r\n                  setRating(r);\r\n                  setClickedStar(r);\r\n                  setTimeout(() => setClickedStar(null), 300);\r\n                }\r\n              }}\r\n              onMouseMove={() => setHoverRating(r)}\r\n            >\r\n              <AnimatedIcon\r\n                className={styles.estrella}\r\n                default={false}\r\n                icon={r <= (hoverRating || rating) ? \"star-fill\" : \"star\"}\r\n                animation={\r\n                  r === clickedStar\r\n                    ? \"rebote\"\r\n                    : r <= (hoverRating || rating)\r\n                      ? \"rosa\"\r\n                      : \"\"\r\n                }\r\n              />\r\n            </span>\r\n          ))}\r\n        </div>\r\n\r\n        <textarea\r\n          placeholder=\"Escribe tu testimonio\"\r\n          value={testimonio}\r\n          onChange={(e) => setTestimonio(e.target.value)}\r\n          required\r\n        />\r\n\r\n        <button className=\"btn-cta\" type=\"submit\" disabled={submitting}>\r\n          {submitting ? \"Enviando...\" : \"Enviar testimonio\"}\r\n        </button>\r\n      </form>\r\n\r\n      <div className={styles.lista}>\r\n        {testimonios\r\n          .filter((t) => t.producto === producto._id)\r\n          .map((t) => (\r\n            <div key={t._id} className={styles.item}>\r\n              <strong>{t.nombre}</strong> — {t.rating}\r\n              <p>{t.testimonio}</p>\r\n            </div>\r\n          ))}\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AAIA;AAEA;AAAA;AACA;AACA;;;AAVA;;;;;;;AAiBe,SAAS,oBAAoB,KAAyB;QAAzB,EAAE,QAAQ,EAAE,IAAI,EAAS,GAAzB;;IAC1C,MAAM,SAAS,IAAA,iRAAS;IACxB,MAAM,EAAE,WAAW,EAAE,OAAO,EAAE,GAAG,IAAA,kJAAc,EAAC;IAChD,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,wSAAQ,EAAC;IAC7C,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,wSAAQ,EAAC;IACrC,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,wSAAQ,EAAC;IAC/C,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,wSAAQ,EAAgB;IAE9D,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,wSAAQ,EAAC;IAE7C,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAChB,IAAI,CAAC,WAAW,IAAI,IAAI;QAExB,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,QAAQ,EAAE;YACxC,OAAO,IAAI,CAAC;YACZ;QACF;QAEA,cAAc;QAEd,MAAM,UAA2B;YAC/B,QAAQ,KAAK,QAAQ;YACrB;YACA;YACA,UAAU,SAAS,GAAG;YACtB,MAAM,KAAK,GAAG;QAChB;QAEA,MAAM,iJAAwB,CAAC;QAE/B,cAAc;QACd,UAAU;QACV,cAAc;QACd;IACF;IAEA,qBACE,4TAAC;QAAQ,WAAW,wLAAM,CAAC,WAAW;;0BACpC,4TAAC;0BAAG;;;;;;0BAEJ,4TAAC;gBAAK,UAAU;gBAAc,WAAW,wLAAM,CAAC,IAAI;;kCAClD,4TAAC;wBAAI,WAAW,wLAAM,CAAC,KAAK;wBAAE,cAAc,IAAM,eAAe;kCAC9D;4BAAC;4BAAG;4BAAG;4BAAG;4BAAG;yBAAE,CAAC,GAAG,CAAC,CAAC,kBACpB,4TAAC;gCACC,cAAW;gCAEX,MAAK;gCACL,UAAU;gCACV,SAAS;oCACP,UAAU;oCACV,eAAe;oCACf,WAAW,IAAM,eAAe,OAAO;gCACzC;gCACA,WAAW,CAAC;oCACV,IAAI,EAAE,GAAG,KAAK,WAAW,EAAE,GAAG,KAAK,KAAK;wCACtC,UAAU;wCACV,eAAe;wCACf,WAAW,IAAM,eAAe,OAAO;oCACzC;gCACF;gCACA,aAAa,IAAM,eAAe;0CAElC,cAAA,4TAAC,gKAAY;oCACX,WAAW,wLAAM,CAAC,QAAQ;oCAC1B,SAAS;oCACT,MAAM,KAAK,CAAC,eAAe,MAAM,IAAI,cAAc;oCACnD,WACE,MAAM,cACF,WACA,KAAK,CAAC,eAAe,MAAM,IACzB,SACA;;;;;;+BA1BL;;;;;;;;;;kCAiCX,4TAAC;wBACC,aAAY;wBACZ,OAAO;wBACP,UAAU,CAAC,IAAM,cAAc,EAAE,MAAM,CAAC,KAAK;wBAC7C,QAAQ;;;;;;kCAGV,4TAAC;wBAAO,WAAU;wBAAU,MAAK;wBAAS,UAAU;kCACjD,aAAa,gBAAgB;;;;;;;;;;;;0BAIlC,4TAAC;gBAAI,WAAW,wLAAM,CAAC,KAAK;0BACzB,YACE,MAAM,CAAC,CAAC,IAAM,EAAE,QAAQ,KAAK,SAAS,GAAG,EACzC,GAAG,CAAC,CAAC,kBACJ,4TAAC;wBAAgB,WAAW,wLAAM,CAAC,IAAI;;0CACrC,4TAAC;0CAAQ,EAAE,MAAM;;;;;;4BAAU;4BAAI,EAAE,MAAM;0CACvC,4TAAC;0CAAG,EAAE,UAAU;;;;;;;uBAFR,EAAE,GAAG;;;;;;;;;;;;;;;;AAQ3B;GAvGwB;;QACP,iRAAS;QACS,kJAAc;;;KAFzB","debugId":null}},
    {"offset": {"line": 1174, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pauli/Desktop/Digital_Nest/Proyects/Process_Girl/process_girl_web/frontend/src/pages/ProductoPage/ProductoPage.tsx"],"sourcesContent":["\"use client\";\r\nimport type { ProductoDigital } from \"@types\";\r\n\r\nimport styles from \"./modules/ProductoPage.module.css\";\r\nimport ProductoCTAFlotante from \"./ProductoCTAFlotante\";\nimport ProductoDetalles from \"./ProductoDetalles\";\r\nimport ProductoImagen from \"./ProductoImagen\";\r\nimport ProductoInfo from \"./ProductoInfo\";\r\nimport ProductoPrecioBox from \"./ProductoPrecioBox\";\r\nimport ProductoTestimonios from \"./ProductoTestimonios\";\r\n\r\nimport { useUI } from \"@/context/UIContext\";\r\nimport { useCarrito } from \"@/hooks/useCarrito\";\r\nimport { useUser } from \"@/hooks/useUser\";\r\n\r\ntype Props = { producto: ProductoDigital };\r\n\r\nexport default function ProductoPage({ producto }: Props) {\r\n  const carrito = useCarrito();\r\n  const { isMobile } = useUI();\r\n  const { user } = useUser();\r\n\r\n  if (!producto) {\r\n    return (\r\n      <div className={styles.error}>Este producto no está disponible.</div>\r\n    );\r\n  }\r\n\r\n  const handleAddToCart = () => {\r\n    carrito.addItem({ ...producto, tipo: \"producto\" });\r\n  };\r\n\r\n  return (\r\n    <section className={styles.page}>\r\n      <div className={styles.grid}>\r\n        {/* 🧱 Columna izquierda */}\r\n        {isMobile && (\r\n          <ProductoPrecioBox producto={producto} onCTA={handleAddToCart} />\r\n        )}\r\n        <div className={styles.colIzquierda}>\r\n          <ProductoImagen producto={producto} />\r\n          {!isMobile && (\r\n            <>\r\n              <ProductoPrecioBox producto={producto} onCTA={handleAddToCart} />\r\n              <ProductoDetalles producto={producto} />\r\n            </>\r\n          )}\r\n        </div>\r\n\r\n        {/* 🧱 Columna derecha */}\r\n        <div className={styles.colDerecha}>\r\n          <ProductoInfo producto={producto} />\r\n          {isMobile && <ProductoDetalles producto={producto} />}\r\n        </div>\r\n      </div>\r\n\r\n      <ProductoTestimonios producto={producto} user={user} />\r\n      <ProductoCTAFlotante producto={producto} />\r\n    </section>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;;;AAbA;;;;;;;;;;;AAiBe,SAAS,aAAa,KAAmB;QAAnB,EAAE,QAAQ,EAAS,GAAnB;;IACnC,MAAM,UAAU,IAAA,2IAAU;IAC1B,MAAM,EAAE,QAAQ,EAAE,GAAG,IAAA,wIAAK;IAC1B,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,qIAAO;IAExB,IAAI,CAAC,UAAU;QACb,qBACE,4TAAC;YAAI,WAAW,iLAAM,CAAC,KAAK;sBAAE;;;;;;IAElC;IAEA,MAAM,kBAAkB;QACtB,QAAQ,OAAO,CAAC;YAAE,GAAG,QAAQ;YAAE,MAAM;QAAW;IAClD;IAEA,qBACE,4TAAC;QAAQ,WAAW,iLAAM,CAAC,IAAI;;0BAC7B,4TAAC;gBAAI,WAAW,iLAAM,CAAC,IAAI;;oBAExB,0BACC,4TAAC,gKAAiB;wBAAC,UAAU;wBAAU,OAAO;;;;;;kCAEhD,4TAAC;wBAAI,WAAW,iLAAM,CAAC,YAAY;;0CACjC,4TAAC,6JAAc;gCAAC,UAAU;;;;;;4BACzB,CAAC,0BACA;;kDACE,4TAAC,gKAAiB;wCAAC,UAAU;wCAAU,OAAO;;;;;;kDAC9C,4TAAC,+JAAgB;wCAAC,UAAU;;;;;;;;;;;;;;kCAMlC,4TAAC;wBAAI,WAAW,iLAAM,CAAC,UAAU;;0CAC/B,4TAAC,2JAAY;gCAAC,UAAU;;;;;;4BACvB,0BAAY,4TAAC,+JAAgB;gCAAC,UAAU;;;;;;;;;;;;;;;;;;0BAI7C,4TAAC,kKAAmB;gBAAC,UAAU;gBAAU,MAAM;;;;;;0BAC/C,4TAAC,kKAAmB;gBAAC,UAAU;;;;;;;;;;;;AAGrC;GA3CwB;;QACN,2IAAU;QACL,wIAAK;QACT,qIAAO;;;KAHF","debugId":null}}]
}