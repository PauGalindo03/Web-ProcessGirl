{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/app/sistemas/page.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"error\": \"page-module__ToYRrq__error\",\n  \"featured\": \"page-module__ToYRrq__featured\",\n  \"featuredButton\": \"page-module__ToYRrq__featuredButton\",\n  \"featuredText\": \"page-module__ToYRrq__featuredText\",\n  \"filters\": \"page-module__ToYRrq__filters\",\n  \"headingDebug\": \"page-module__ToYRrq__headingDebug\",\n  \"loading\": \"page-module__ToYRrq__loading\",\n  \"page\": \"page-module__ToYRrq__page\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 17, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pauli/Desktop/Digital_Nest/Proyects/Process_Girl/process_girl_web/frontend/src/components/catalogo/ui/index.ts"],"sourcesContent":["export { default as CollectionSection } from './CollectionSection';\r\nexport { default as FiltersBar } from './FiltersBar';\r\nexport { default as PackagesMagazine } from './PackagesMagazine';\r\nexport { default as ProductCard } from './ProductCard';\r\n"],"names":[],"mappings":";AAAA;AACA;AACA;AACA","debugId":null}},
    {"offset": {"line": 33, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pauli/Desktop/Digital_Nest/Proyects/Process_Girl/process_girl_web/frontend/src/components/catalogo/index.ts"],"sourcesContent":["export * from './ui';"],"names":[],"mappings":";AAAA","debugId":null}},
    {"offset": {"line": 62, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pauli/Desktop/Digital_Nest/Proyects/Process_Girl/process_girl_web/frontend/src/fallbacks/fallPaquetes.ts"],"sourcesContent":["import type { PaquetePD } from \"@types\";\r\n\r\nimport { fallbackProductos } from \"./fallProductos\";\r\n\r\nexport function buildFallbackPaquetes(): PaquetePD[] {\r\n  const GST = fallbackProductos.find(p => p.sku === \"GST-001\")!;\r\n  const UGrl = fallbackProductos.find(p => p.sku === \"UGrl-002\")!;\r\n  const FCT = fallbackProductos.find(p => p.sku === \"FCT-003\")!;\r\n\r\n  return [\r\n    {\r\n      _id: \"1\",\r\n      titulo: \"Finanzas con tacones\",\r\n      sku: \"FCT\",\r\n      paquete: 1,\r\n      productos: [FCT, GST,UGrl],\r\n      estado: \"Activo\",\r\n      tipo: \"paquete\",\r\n      descripcion: \"Paquete digital de finanzas para mujeres jóvenes\",\r\n      precio: 100,\r\n      descuento: 0,\r\n      linkEntrega: \"/paquetes/fct\",\r\n      createdAt: new Date().toISOString(),\r\n      updatedAt: new Date().toISOString(),\r\n      precioFinal: 100,\r\n    },\r\n    {\r\n      _id: \"2\",\r\n      titulo: \"Get Your Shit Together\",\r\n      sku: \"GST\",\r\n      paquete: 2,\r\n      productos: [FCT, GST,UGrl],\r\n      estado: \"Activo\",\r\n      tipo: \"paquete\",\r\n      descripcion: \"Paquete gratuito de organización personal\",\r\n      precio: 0,\r\n      descuento: 0,\r\n      linkEntrega: \"/paquetes/gst\",\r\n      createdAt: new Date().toISOString(),\r\n      updatedAt: new Date().toISOString(),\r\n      precioFinal: 0,\r\n    },\r\n    {\r\n      _id: \"3\",\r\n      titulo: \"Process to Glow\",\r\n      sku: \"PTG\",\r\n      paquete: 3,\r\n      productos: [FCT, GST,UGrl],\r\n      estado: \"Activo\",\r\n      tipo: \"paquete\",\r\n      descripcion: \"Paquete de productividad y bienestar\",\r\n      precio: 150,\r\n      descuento: 10,\r\n      linkEntrega: \"/paquetes/ptg\",\r\n      createdAt: new Date().toISOString(),\r\n      updatedAt: new Date().toISOString(),\r\n      precioFinal: 135,\r\n    },\r\n  ];\r\n}\r\n\r\nexport const fallbackPaquetes: PaquetePD[] = buildFallbackPaquetes();\r\n"],"names":[],"mappings":";;;;;;AAEA;;AAEO,SAAS;IACd,MAAM,MAAM,yJAAiB,CAAC,IAAI,CAAC,CAAA,IAAK,EAAE,GAAG,KAAK;IAClD,MAAM,OAAO,yJAAiB,CAAC,IAAI,CAAC,CAAA,IAAK,EAAE,GAAG,KAAK;IACnD,MAAM,MAAM,yJAAiB,CAAC,IAAI,CAAC,CAAA,IAAK,EAAE,GAAG,KAAK;IAElD,OAAO;QACL;YACE,KAAK;YACL,QAAQ;YACR,KAAK;YACL,SAAS;YACT,WAAW;gBAAC;gBAAK;gBAAI;aAAK;YAC1B,QAAQ;YACR,MAAM;YACN,aAAa;YACb,QAAQ;YACR,WAAW;YACX,aAAa;YACb,WAAW,IAAI,OAAO,WAAW;YACjC,WAAW,IAAI,OAAO,WAAW;YACjC,aAAa;QACf;QACA;YACE,KAAK;YACL,QAAQ;YACR,KAAK;YACL,SAAS;YACT,WAAW;gBAAC;gBAAK;gBAAI;aAAK;YAC1B,QAAQ;YACR,MAAM;YACN,aAAa;YACb,QAAQ;YACR,WAAW;YACX,aAAa;YACb,WAAW,IAAI,OAAO,WAAW;YACjC,WAAW,IAAI,OAAO,WAAW;YACjC,aAAa;QACf;QACA;YACE,KAAK;YACL,QAAQ;YACR,KAAK;YACL,SAAS;YACT,WAAW;gBAAC;gBAAK;gBAAI;aAAK;YAC1B,QAAQ;YACR,MAAM;YACN,aAAa;YACb,QAAQ;YACR,WAAW;YACX,aAAa;YACb,WAAW,IAAI,OAAO,WAAW;YACjC,WAAW,IAAI,OAAO,WAAW;YACjC,aAAa;QACf;KACD;AACH;AAEO,MAAM,mBAAgC","debugId":null}},
    {"offset": {"line": 145, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pauli/Desktop/Digital_Nest/Proyects/Process_Girl/process_girl_web/frontend/src/services/paquetePDService.ts"],"sourcesContent":["// src/services/paquetePDService.ts\r\nimport type {\r\n  PaquetePD,\r\n  PaquetePDInput,\r\n} from \"@types\";\r\n\r\nimport api from \"./api\";\n\r\nimport { fallbackPaquetes } from \"@/fallbacks/fallPaquetes\";\r\n\r\nconst USE_FAKE = process.env.NEXT_PUBLIC_USE_FAKE_DATA === \"true\";\r\n\r\n// =======================\r\n// Obtener paquetes activos (público)\r\n// =======================\r\nexport async function getPublicAll(): Promise<PaquetePD[]> {\r\n  const res = await api.get<PaquetePD[]>(\"public/paquetePD\");\r\n  return res.data;\r\n}\r\n\r\n// =======================\r\n// Obtener los paquetes públicos por ID\r\n// =======================\r\nexport async function getPublicById(id: string): Promise<PaquetePD | null> {\r\n  if (USE_FAKE) {\r\n    const paquete = fallbackPaquetes.find((p) => p._id === id);\r\n    return paquete ?? null;\r\n  }\r\n  try {\r\n    const res = await api.get<PaquetePD>(`public/paquetePD/${id}`);\r\n    return res.data;\r\n  } catch (err) {\r\n    console.error(\"Error en getPublicById:\", err);\r\n    return null;\r\n  }\r\n}\r\n\r\nexport async function getPublicBySku(sku: string): Promise<PaquetePD | null> {\r\n  if (USE_FAKE) {\r\n    return fallbackPaquetes.find(p => p.sku === sku) ?? null;\r\n  }\r\n\r\n  try {\r\n    const res = await api.get<PaquetePD>(`public/paquetePD/sku/${sku}`);\r\n    return res.data;\r\n  } catch (err) {\r\n    console.error(\"Error en getPublicBySku (paquete):\", err);\r\n    return null;\r\n  }\r\n}\r\n\r\n// =======================\r\n// Obtener todos los paquetes (admin)\r\n// =======================\r\nexport async function getAll(): Promise<PaquetePD[]> {\r\n  const res = await api.get<PaquetePD[]>(\"admin/paquetePD\");\r\n  return res.data;\r\n}\r\n\r\n// =======================\r\n// Crear paquete\r\n// =======================\r\nexport async function create(data: PaquetePDInput): Promise<PaquetePD> {\r\n  const res = await api.post<PaquetePD>(\"admin/paquetePD\", data);\r\n  return res.data;\r\n}\r\n\r\n// =======================\r\n// Actualizar paquete\r\n// =======================\r\nexport async function update(\r\n  id: string,\r\n  data: PaquetePDInput\r\n): Promise<PaquetePD> {\r\n  const res = await api.put<PaquetePD>(`admin/paquetePD/${id}`, data);\r\n  return res.data;\r\n}\r\n\r\n// =======================\r\n// Eliminar paquete\r\n// =======================\r\nexport async function remove(id: string): Promise<{ mensaje: string }> {\r\n  const res = await api.delete<{ mensaje: string }>(`admin/paquetePD/${id}`);\r\n  return res.data;\r\n}\r\n"],"names":[],"mappings":"AAAA,mCAAmC;;;;;;;;;;;;;;;;;AAUlB;AAJjB;AAEA;;;AAEA,MAAM,WAAW,6CAA0C;AAKpD,eAAe;IACpB,MAAM,MAAM,MAAM,oIAAG,CAAC,GAAG,CAAc;IACvC,OAAO,IAAI,IAAI;AACjB;AAKO,eAAe,cAAc,EAAU;IAC5C,wCAAc;QACZ,MAAM,UAAU,uJAAgB,CAAC,IAAI,CAAC,CAAC,IAAM,EAAE,GAAG,KAAK;QACvD,OAAO,oBAAA,qBAAA,UAAW;IACpB;;;AAQF;AAEO,eAAe,eAAe,GAAW;IAC9C,wCAAc;YACL;QAAP,OAAO,CAAA,yBAAA,uJAAgB,CAAC,IAAI,CAAC,CAAA,IAAK,EAAE,GAAG,KAAK,kBAArC,oCAAA,yBAA6C;IACtD;;;AASF;AAKO,eAAe;IACpB,MAAM,MAAM,MAAM,oIAAG,CAAC,GAAG,CAAc;IACvC,OAAO,IAAI,IAAI;AACjB;AAKO,eAAe,OAAO,IAAoB;IAC/C,MAAM,MAAM,MAAM,oIAAG,CAAC,IAAI,CAAY,mBAAmB;IACzD,OAAO,IAAI,IAAI;AACjB;AAKO,eAAe,OACpB,EAAU,EACV,IAAoB;IAEpB,MAAM,MAAM,MAAM,oIAAG,CAAC,GAAG,CAAY,AAAC,mBAAqB,OAAH,KAAM;IAC9D,OAAO,IAAI,IAAI;AACjB;AAKO,eAAe,OAAO,EAAU;IACrC,MAAM,MAAM,MAAM,oIAAG,CAAC,MAAM,CAAsB,AAAC,mBAAqB,OAAH;IACrE,OAAO,IAAI,IAAI;AACjB","debugId":null}},
    {"offset": {"line": 211, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pauli/Desktop/Digital_Nest/Proyects/Process_Girl/process_girl_web/frontend/src/hooks/cached/useCachedPaquetesPD.ts"],"sourcesContent":["\"use client\";\r\nimport { useState, useEffect, useCallback, useRef } from \"react\";\r\n\r\nimport type { PaquetePD } from \"@types\";\r\n\r\nimport { fallbackPaquetes } from \"@/fallbacks/fallPaquetes\";\r\nimport * as paqueteService from \"@/services/paquetePDService\";\r\n\r\nconst LOCAL_KEY = \"ProcessGirl_paquetes\";\r\nconst CACHE_DURATION_MS = 12 * 60 * 60 * 1000; // 12h\r\nconst LIMITED_POLL_MS = 15 * 1000;\r\nconst FULL_REFRESH_MS = 5 * 60 * 1000;\r\nconst USE_FAKE = process.env.NEXT_PUBLIC_USE_FAKE_DATA === \"true\";\r\n\r\n/**\r\n * Normaliza un paquete, asegurando que precioFinal esté calculado.\r\n */\r\nconst normalize = (p: PaquetePD): PaquetePD => {\r\n  const precio = p.precio ?? 0;\r\n  const descuento = p.descuento ?? 0;\r\n  const precioFinal =\r\n    p.precioFinal ?? Math.round(precio * (1 - descuento / 100) * 100) / 100;\r\n  return { ...p, precioFinal };\r\n};\r\n\r\n/**\r\n * Intenta cargar paquetes desde localStorage si no han expirado.\r\n */\r\nconst loadCachedPaquetes = (): PaquetePD[] | null => {\r\n  try {\r\n    const cached = localStorage.getItem(LOCAL_KEY);\r\n    const timestamp = localStorage.getItem(`${LOCAL_KEY}_timestamp`);\r\n    if (cached && timestamp) {\r\n      const expired = Date.now() - parseInt(timestamp, 10) > CACHE_DURATION_MS;\r\n      if (!expired) return JSON.parse(cached);\r\n    }\r\n  } catch {}\r\n  return null;\r\n};\r\n\r\nexport function useCachedPaquetesPD() {\r\n  const [paquetes, setPaquetes] = useState<PaquetePD[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const pollRef = useRef<number | null>(null);\r\n  const fullRef = useRef<number | null>(null);\r\n\r\n  const fetchAll = useCallback(async (opts?: { minimal?: boolean }) => {\r\n    if (USE_FAKE) {\r\n      setPaquetes(fallbackPaquetes.map(normalize));\r\n      return;\r\n    }\r\n\r\n    setLoading(!opts?.minimal);\r\n    setError(null);\r\n\r\n    try {\r\n      const data = await paqueteService.getPublicAll();\r\n      const normalized = data.map(normalize);\r\n      setPaquetes(normalized);\r\n\r\n      const hasLimited = normalized.some(p =>\r\n        p.productos.some(pr => pr.esEdicionLimitada)\r\n      );\r\n      if (!hasLimited) {\r\n        localStorage.setItem(LOCAL_KEY, JSON.stringify(normalized));\r\n        localStorage.setItem(`${LOCAL_KEY}_timestamp`, Date.now().toString());\r\n      }\r\n    } catch (err: unknown) {\r\n      if (err instanceof Error) setError(err.message);\r\n      else setError(\"Error al cargar paquetes\");\r\n\r\n      const cached = loadCachedPaquetes();\r\n      setPaquetes(cached ?? fallbackPaquetes);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  const pollLight = useCallback(async () => {\r\n    if (!USE_FAKE) await fetchAll({ minimal: true });\r\n  }, [fetchAll]);\r\n\r\n  useEffect(() => {\r\n    if (USE_FAKE) {\r\n      setPaquetes(fallbackPaquetes.map(normalize));\r\n      return;\r\n    }\r\n\r\n    const cached = loadCachedPaquetes();\r\n    if (cached) setPaquetes(cached);\r\n\r\n    fetchAll();\r\n\r\n    pollRef.current = window.setInterval(() => {\r\n      pollLight();\r\n    }, LIMITED_POLL_MS);\r\n\r\n    fullRef.current = window.setInterval(() => {\r\n      fetchAll();\r\n    }, FULL_REFRESH_MS);\r\n\r\n    return () => {\r\n      if (pollRef.current) clearInterval(pollRef.current);\r\n      if (fullRef.current) clearInterval(fullRef.current);\r\n    };\r\n  }, [fetchAll, pollLight]);\r\n\r\n  return { paquetes, loading, error, refresh: fetchAll, setPaquetes };\r\n}\r\n"],"names":[],"mappings":";;;;AAYiB;AAXjB;AAIA;AACA;;AANA;;;;AAQA,MAAM,YAAY;AAClB,MAAM,oBAAoB,KAAK,KAAK,KAAK,MAAM,MAAM;AACrD,MAAM,kBAAkB,KAAK;AAC7B,MAAM,kBAAkB,IAAI,KAAK;AACjC,MAAM,WAAW,6CAA0C;AAE3D;;CAEC,GACD,MAAM,YAAY,CAAC;QACF;IAAf,MAAM,SAAS,CAAA,YAAA,EAAE,MAAM,cAAR,uBAAA,YAAY;QACT;IAAlB,MAAM,YAAY,CAAA,eAAA,EAAE,SAAS,cAAX,0BAAA,eAAe;QAE/B;IADF,MAAM,cACJ,CAAA,iBAAA,EAAE,WAAW,cAAb,4BAAA,iBAAiB,KAAK,KAAK,CAAC,SAAS,CAAC,IAAI,YAAY,GAAG,IAAI,OAAO;IACtE,OAAO;QAAE,GAAG,CAAC;QAAE;IAAY;AAC7B;AAEA;;CAEC,GACD,MAAM,qBAAqB;IACzB,IAAI;QACF,MAAM,SAAS,aAAa,OAAO,CAAC;QACpC,MAAM,YAAY,aAAa,OAAO,CAAC,AAAC,GAAY,OAAV,WAAU;QACpD,IAAI,UAAU,WAAW;YACvB,MAAM,UAAU,KAAK,GAAG,KAAK,SAAS,WAAW,MAAM;YACvD,IAAI,CAAC,SAAS,OAAO,KAAK,KAAK,CAAC;QAClC;IACF,EAAE,UAAM,CAAC;IACT,OAAO;AACT;AAEO,SAAS;;IACd,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,wSAAQ,EAAc,EAAE;IACxD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,wSAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,wSAAQ,EAAgB;IAElD,MAAM,UAAU,IAAA,sSAAM,EAAgB;IACtC,MAAM,UAAU,IAAA,sSAAM,EAAgB;IAEtC,MAAM,WAAW,IAAA,2SAAW;qDAAC,OAAO;YAClC,wCAAc;gBACZ,YAAY,uJAAgB,CAAC,GAAG,CAAC;gBACjC;YACF;;;QA0BF;oDAAG,EAAE;IAEL,MAAM,YAAY,IAAA,2SAAW;sDAAC;YAC5B;;QACF;qDAAG;QAAC;KAAS;IAEb,IAAA,ySAAS;yCAAC;YACR,wCAAc;gBACZ,YAAY,uJAAgB,CAAC,GAAG,CAAC;gBACjC;YACF;;;YAEA,MAAM;QAiBR;wCAAG;QAAC;QAAU;KAAU;IAExB,OAAO;QAAE;QAAU;QAAS;QAAO,SAAS;QAAU;IAAY;AACpE;GAtEgB","debugId":null}},
    {"offset": {"line": 311, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pauli/Desktop/Digital_Nest/Proyects/Process_Girl/process_girl_web/frontend/src/hooks/cached/useCachedProductosDigitales.ts"],"sourcesContent":["// src/app/hooks/useProductosDigitales.ts\r\n\"use client\";\r\nimport { useCallback, useEffect, useRef, useState } from \"react\";\r\n\r\nimport type { ProductoDigital } from \"@types\";\r\n\r\nimport { fallbackProductos } from \"@/fallbacks/fallProductos\";\r\nimport * as productoService from \"@/services/productoDigitalService\";\r\n\r\nconst LOCAL_KEY = \"ProcessGirl_productos\";\r\nconst CACHE_DURATION_MS = 12 * 60 * 60 * 1000; // 12h\r\nconst LIMITED_POLL_MS = 15 * 1000; // 15s para ediciones limitadas\r\nconst FULL_REFRESH_MS = 5 * 60 * 1000; // 5min full refresh\r\nconst USE_FAKE = process.env.NEXT_PUBLIC_USE_FAKE_DATA === \"true\";\r\n\r\nexport function useCachedProductosDigitales() {\r\n  const [productos, setProductos] = useState<ProductoDigital[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  // ref para controlar intervalos\r\n  const pollRef = useRef<number | null>(null);\r\n  const fullRef = useRef<number | null>(null);\r\n\r\n  // Normalizar precio final simple (puedes reemplazar por lógica real)\r\n  const normalize = (p: ProductoDigital): ProductoDigital => {\r\n    const precioBase = p.precioBase ?? 0;\r\n    const descuento = p.descuento ?? 0;\r\n    const precioFinal = p.precioFinal ?? Math.round((precioBase * (1 - (descuento / 100))) * 100) / 100;\r\n    return { ...p, precioFinal };\r\n  };\r\n\r\n  const fetchAll = useCallback(async (opts?: { minimal?: boolean }) => {\r\n    if (USE_FAKE) {\r\n      setProductos(fallbackProductos.map(normalize));\r\n      return;\r\n    }\r\n\r\n    setLoading(!opts?.minimal);\r\n    setError(null);\r\n    try {\r\n      const data = await productoService.obtenerPublicos(); // todos públicos\r\n      const normalized = data.map(normalize);\r\n      setProductos(normalized);\r\n\r\n      // guardar cache solo si no hay ediciones limitadas\r\n      const hasLimited = normalized.some(p => p.esEdicionLimitada);\r\n      if (!hasLimited) {\r\n        try {\r\n          localStorage.setItem(LOCAL_KEY, JSON.stringify(normalized));\r\n          localStorage.setItem(`${LOCAL_KEY}_timestamp`, Date.now().toString());\r\n        } catch {}\r\n      }\r\n    } catch (err: unknown) {\r\n      if (err instanceof Error) setError(err.message);\r\n      else setError(\"Error al cargar productos\");\r\n      // fallback a cache\r\n      try {\r\n        const cached = localStorage.getItem(LOCAL_KEY);\r\n        if (cached) setProductos(JSON.parse(cached));\r\n      } catch {}\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  // Poll específico solo para productos limitados: pide solo su disponibilidad (si tu API admite un endpoint, úsalo).\r\n  // Aquí hacemos fetchAll minimal para refrescar cantidades.\r\n  const pollLimited = useCallback(async () => {\r\n    if (USE_FAKE) return;\r\n    try {\r\n      // Llamamos al backend con una petición \"ligera\" si tu API tiene, si no, llamamos fetchAll({ minimal: true })\r\n      await fetchAll({ minimal: true });\r\n    } catch {}\r\n  }, [fetchAll]);\r\n\r\n  useEffect(() => {\r\n    if (USE_FAKE) {\r\n      setProductos(fallbackProductos.map(normalize));\r\n      return;\r\n    }\r\n\r\n    // 1) intentar cache\r\n    try {\r\n      const cached = localStorage.getItem(LOCAL_KEY);\r\n      const timestamp = localStorage.getItem(`${LOCAL_KEY}_timestamp`);\r\n      if (cached && timestamp) {\r\n        const parsed: ProductoDigital[] = JSON.parse(cached);\r\n        const expired = Date.now() - parseInt(timestamp, 10) > CACHE_DURATION_MS;\r\n        const hasLimited = parsed.some(p => p.esEdicionLimitada);\r\n        if (!expired && !hasLimited) {\r\n          setProductos(parsed);\r\n        }\r\n      }\r\n    } catch {}\r\n\r\n    // 2) fetch inicial completo\r\n    fetchAll();\r\n\r\n    // 3) set polling:\r\n    // -- pollLimited cada LIMITED_POLL_MS\r\n    pollRef.current = window.setInterval(() => {\r\n      // Solo poll si existen productos limitados en el estado actual\r\n      const hasLimitedNow = productos.some(p => p.esEdicionLimitada);\r\n      if (hasLimitedNow) pollLimited();\r\n    }, LIMITED_POLL_MS);\r\n\r\n    // -- full refresh menos frecuente\r\n    fullRef.current = window.setInterval(() => {\r\n      fetchAll();\r\n    }, FULL_REFRESH_MS);\r\n\r\n    return () => {\r\n      if (pollRef.current) clearInterval(pollRef.current);\r\n      if (fullRef.current) clearInterval(fullRef.current);\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [fetchAll]);\r\n\r\n  return { productos, loading, error, refresh: fetchAll, setProductos };\r\n}\r\n"],"names":[],"mappings":"AAAA,yCAAyC;;;;;AAaxB;AAXjB;AAIA;AACA;;AANA;;;;AAQA,MAAM,YAAY;AAClB,MAAM,oBAAoB,KAAK,KAAK,KAAK,MAAM,MAAM;AACrD,MAAM,kBAAkB,KAAK,MAAM,+BAA+B;AAClE,MAAM,kBAAkB,IAAI,KAAK,MAAM,oBAAoB;AAC3D,MAAM,WAAW,6CAA0C;AAEpD,SAAS;;IACd,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,wSAAQ,EAAoB,EAAE;IAChE,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,wSAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,wSAAQ,EAAgB;IAElD,gCAAgC;IAChC,MAAM,UAAU,IAAA,sSAAM,EAAgB;IACtC,MAAM,UAAU,IAAA,sSAAM,EAAgB;IAEtC,qEAAqE;IACrE,MAAM,YAAY,CAAC;YACE;QAAnB,MAAM,aAAa,CAAA,gBAAA,EAAE,UAAU,cAAZ,2BAAA,gBAAgB;YACjB;QAAlB,MAAM,YAAY,CAAA,eAAA,EAAE,SAAS,cAAX,0BAAA,eAAe;YACb;QAApB,MAAM,cAAc,CAAA,iBAAA,EAAE,WAAW,cAAb,4BAAA,iBAAiB,KAAK,KAAK,CAAC,AAAC,aAAa,CAAC,IAAK,YAAY,GAAI,IAAK,OAAO;QAChG,OAAO;YAAE,GAAG,CAAC;YAAE;QAAY;IAC7B;IAEA,MAAM,WAAW,IAAA,2SAAW;6DAAC,OAAO;YAClC,wCAAc;gBACZ,aAAa,yJAAiB,CAAC,GAAG,CAAC;gBACnC;YACF;;;QA4BF;4DAAG,EAAE;IAEL,oHAAoH;IACpH,2DAA2D;IAC3D,MAAM,cAAc,IAAA,2SAAW;gEAAC;YAC9B,wCAAc;;;QAKhB;+DAAG;QAAC;KAAS;IAEb,IAAA,ySAAS;iDAAC;YACR,wCAAc;gBACZ,aAAa,yJAAiB,CAAC,GAAG,CAAC;gBACnC;YACF;;;QAoCA,uDAAuD;QACzD;gDAAG;QAAC;KAAS;IAEb,OAAO;QAAE;QAAW;QAAS;QAAO,SAAS;QAAU;IAAa;AACtE;GAzGgB","debugId":null}},
    {"offset": {"line": 401, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pauli/Desktop/Digital_Nest/Proyects/Process_Girl/process_girl_web/frontend/src/app/sistemas/page.tsx"],"sourcesContent":["'use client';\r\nimport React, { useMemo, useState } from 'react';\r\n\r\nimport type { Categoria, ProductoDigital } from '@types';\r\n\r\nimport styles from './page.module.css';\r\n\r\nimport {\r\n  PackagesMagazine,\r\n  FiltersBar,\r\n  CollectionSection,\r\n} from '@/components/catalogo';\r\nimport { useCachedConfiguracion } from '@/hooks/cached/useCachedConfiguracion';\r\nimport { useCachedPaquetesPD } from '@/hooks/cached/useCachedPaquetesPD';\r\nimport { useCachedProductosDigitales } from '@/hooks/cached/useCachedProductosDigitales';\r\nimport { useCarrito } from '@/hooks/useCarrito';\r\n\r\nexport default function SistemasPage() {\r\n  const { productos, loading, error } = useCachedProductosDigitales();\r\n  const { paquetes } = useCachedPaquetesPD();\r\n  const config = useCachedConfiguracion();\r\n  const carrito = useCarrito();\r\n\r\n  const [selectedCategory, setSelectedCategory] = useState<string | null>(null);\r\n\r\n  // ✅ Construir lista de categorías\r\n  const categories = useMemo(() => {\r\n    const set = new Set<string>();\r\n    productos.forEach((p) => {\r\n      (p.categoria ?? []).forEach((c) => set.add(c.nombre));\r\n    });\r\n    set.add('Edición limitada');\r\n    set.add('Gratis');\r\n    return Array.from(set);\r\n  }, [productos]);\r\n\r\n  // ✅ Agrupar productos por categoría\r\n  const grouped = useMemo(() => {\r\n    const map = new Map<string, ProductoDigital[]>();\r\n    categories.forEach((c) => map.set(c, []));\r\n\r\n    productos.forEach((p) => {\r\n      const isLimited = p.esEdicionLimitada;\r\n      const isFree = (p.precioFinal ?? 0) <= 0;\r\n      const cats = (p.categoria ?? []).map(\r\n        (c: Categoria) => c.nombre ?? String(c)\r\n      );\r\n\r\n      if (isLimited) map.get('Edición limitada')?.push(p);\r\n      else if (isFree) map.get('Gratis')?.push(p);\r\n\r\n      if (cats.length === 0) {\r\n        if (!map.has('Otros')) map.set('Otros', []);\r\n        map.get('Otros')?.push(p);\r\n      } else {\r\n        cats.forEach((name: string) => {\r\n          if (!map.has(name)) map.set(name, []);\r\n          map.get(name)?.push(p);\r\n        });\r\n      }\r\n    });\r\n\r\n    return map;\r\n  }, [productos, categories]);\r\n\r\n  // ✅ Productos visibles según categoría seleccionada\r\n  const visibleProducts = useMemo(() => {\r\n    if (!selectedCategory) return productos;\r\n    return grouped.get(selectedCategory) ?? [];\r\n  }, [selectedCategory, productos, grouped]);\r\n\r\n  // ✅ Función \"Lo quiero\"\r\n  const onWant = (p: ProductoDigital) => {\r\n    carrito.addItem(p);\r\n    alert(`Agregado: ${p.titulo}`);\r\n  };\r\n\r\n  return (\r\n    <section className={styles.page}>\r\n      {config.ofertas?.[0] && (\r\n        <section className={styles.featured}>\r\n          <div className={styles.featuredText}>\r\n            <h2>{config.ofertas[0].titulo}</h2>\r\n            <p>{config.ofertas[0].descripcion}</p>\r\n          </div>\r\n          <div>\r\n            <button\r\n              className={styles.featuredButton}\r\n              onClick={() =>\r\n                (window.location.href =\r\n                  config.ofertas?.[0].linkOfertas ?? '#')\r\n              }\r\n            >\r\n              {config.ofertas[0].cta || 'Ver oferta'}\r\n            </button>\r\n          </div>\r\n        </section>\r\n      )}\r\n\r\n      {paquetes && <PackagesMagazine paquetes={paquetes} />}\r\n\r\n      <div className={styles.filters}>\r\n        <FiltersBar\r\n          categories={categories} // ✅ ahora es string[]\r\n          selected={selectedCategory}\r\n          onSelect={setSelectedCategory}\r\n        />\r\n      </div>\r\n\r\n      <section>\r\n        {loading && (\r\n          <div className={styles.loading}>Cargando productos...</div>\r\n        )}\r\n        {error && <div className={styles.error}>{error}</div>}\r\n        <CollectionSection\r\n          title={selectedCategory ?? 'Todos los sistemas'}\r\n          productos={visibleProducts}\r\n          onWant={onWant}\r\n        />\r\n      </section>\r\n    </section>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}